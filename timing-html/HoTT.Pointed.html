<html>
<head>
<title>Pointed.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Pointed.v</h1>

<div class="code" title="File: Pointed.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)
(** * Pointed Types *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 3
Time: 0.043s">
<div class="time" style="width: 1.0500610500611%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 3
Time: 0.013s">
<div class="time" style="width: 0.31746031746032%"></div>
<pre>
Require Import Fibrations Factorization.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 4
Time: 0.179s">
<div class="time" style="width: 4.3711843711844%"></div>
<pre>
Require Import Modalities.Modality HIT.Truncations HIT.Connectedness.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 5
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
Import TrM.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope trunc_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Allow ourselves to implicitly generalize over types [A] and [B], and a function [f]. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Generalizable Variables A B f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Constructions of pointed types *)

(** Any contractible type is pointed. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance ispointed_contr `{Contr A} : IsPointed A := center A.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A pi type with a pointed target is pointed. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 17
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance ispointed_forall `{H : forall a : A, IsPointed (B a)}
: IsPointed (forall a, B a)
  := fun a =&gt; point (B a).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A sigma type of pointed components is pointed. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 21
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance ispointed_sigma `{IsPointed A} `{IsPointed (B (point A))}
: IsPointed (sigT B)
  := (point A; point (B (point A))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A cartesian product of pointed types is pointed. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 25
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance ispointed_prod `{IsPointed A, IsPointed B} : IsPointed (A * B)
  := (point A, point B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Loop spaces *)

(** The type [x = x] is pointed. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance ispointed_loops A (a : A)
: IsPointed (a = a)
  := idpath.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 32
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition loops (A : pType) : pType
  := Build_pType (point A = point A) _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Fixpoint iterated_loops (n : nat) (A : pType)
         {struct n} : pType
  := match n with
       | O =&gt; A
       | S p =&gt; loops (iterated_loops p A)
     end.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Inner unfolding for iterated loops *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma unfold_iterated_loops (n : nat) (X : pType)
  : iterated_loops n.+1 X = iterated_loops n (loops X).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  change (iterated_loops n.+2 X)
    with (loops (iterated_loops n.+1 X)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 50
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  destruct IHn^.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The loop space decreases the truncation level by one.  We don't bother making this an instance because it is automatically found by typeclass search, but we record it here in case anyone is looking for it. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition istrunc_loops {n} (A : pType) `{IsTrunc n.+1 A}
: IsTrunc n (loops A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 57
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
  exact _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Similarly for connectedness. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition isconnected_loops `{Univalence} {n} (A : pType)
           `{IsConnected n.+1 A}
: IsConnected n (loops A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 64
Time: 0.251s">
<div class="time" style="width: 6.1294261294261%"></div>
<pre>
  exact _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Pointed functions *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 69
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>Record pMap (A B : pType) :=
  { pointed_fun : A -&gt; B ;
    point_eq : pointed_fun (point A) = point B }.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments point_eq {A B} f : rename.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Coercion pointed_fun : pMap &gt;-&gt; Funclass.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Declare Scope pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Infix "-&gt;*" := pMap : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pmap_idmap (A : pType): A -&gt;* A
  := Build_pMap A A idmap 1.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 83
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>

Definition pmap_compose {A B C : pType}
           (g : B -&gt;* C) (f : A -&gt;* B)
: A -&gt;* C
  := Build_pMap A C (g o f)
                (ap g (point_eq f) @ point_eq g).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Infix "o*" := pmap_compose : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Another option would be
&lt;&lt;
Delimit Scope pmap_scope with pmap.
Bind Scope pmap_scope with pMap.
Infix "o" := pmap_compose : pmap_scope.
&gt;&gt;
which would allow us to use [o] for pointed maps as well most of the time.  However, it would sometimes require adding [%pmap] scoping markers. *)

(** ** Pointed homotopies *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 102
Time: 0.005s">
<div class="time" style="width: 0.12210012210012%"></div>
<pre>Record pHomotopy {A B : pType} (f g : pMap A B) :=
  { pointed_htpy : f == g ;
    point_htpy : pointed_htpy (point A) @ point_eq g = point_eq f }.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments Build_pHomotopy {A B f g} p q : rename.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments point_htpy {A B f g} p : rename.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments pointed_htpy {A B f g} p x.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Coercion pointed_htpy : pHomotopy &gt;-&gt; pointwise_paths.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Infix "==*" := pHomotopy : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance phomotopy_reflexive {A B} : Reflexive (@pHomotopy A B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  serapply Build_pHomotopy.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply concat_1p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The following tactic often allows us to "pretend" that pointed maps and homotopies preserve basepoints strictly.  We have carefully defined [pMap] and [pHomotopy] so that when destructed, their second components are paths with right endpoints free, to which we can apply Paulin-Morhing path-induction. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Ltac pointed_reduce :=
  unfold pointed_fun, pointed_htpy; cbn;
  repeat match goal with
           | [ X : pType |- _ ] =&gt; destruct X as [X ?]
           | [ phi : pMap ?X ?Y |- _ ] =&gt; destruct phi as [phi ?]
           | [ alpha : pHomotopy ?f ?g |- _ ] =&gt; destruct alpha as [alpha ?]
         end;
  cbn in *; unfold point in *;
  path_induction; cbn;
  (** TODO: [pointed_reduce] uses [rewrite], and thus according to our current general rules, it should only be used in opaque proofs.  We don't yet need any of the proofs that use it to be transparent, but there's a good chance we will eventually.  At that point we can consider whether to allow it in transparent proofs, modify it to not use [rewrite], or exclude it from proofs that need to be transparent. *)
  rewrite ?concat_p1, ?concat_1p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Functoriality of loop spaces *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition loops_functor {A B : pType} (f : A -&gt;* B)
: (loops A) -&gt;* (loops B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 137
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine (Build_pMap (loops A) (loops B)
            (fun p =&gt; (point_eq f)^ @ (ap f p @ point_eq f)) _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply moveR_Vp; simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (concat_1p _ @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 141
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Fixpoint iterated_loops_functor {A B : pType} (n : nat) 
  : (A -&gt;* B) -&gt; (iterated_loops n A) -&gt;* (iterated_loops n B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct n.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact idmap.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (loops_functor o _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply iterated_loops_functor.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 150
Time: 0.006s">
<div class="time" style="width: 0.14652014652015%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 151
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Lemma loops_functor_pp {X Y : pType} (f : pMap X Y) : forall x y,
  loops_functor f (x @ y) = loops_functor f x @ loops_functor f y.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros x y; cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 156
Time: 0.016s">
<div class="time" style="width: 0.39072039072039%"></div>
<pre>
  by destruct (point_eq f), x, y.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 157
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition loops_2functor {A B : pType} {f g : A -&gt;* B} (p : f ==* g)
: (loops_functor f) ==* (loops_functor g).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 162
Time: 0.01s">
<div class="time" style="width: 0.24420024420024%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 163
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros q.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ @ (concat_1p _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ @ (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveR_Vp.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (concat_Ap p q).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 170
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 170
Time: 0.045s">
<div class="time" style="width: 1.0989010989011%"></div>
<pre>
    abstract (rewrite !concat_p1; reflexivity).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 171
Time: 0.041s">
<div class="time" style="width: 1.001221001221%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Associativity of pointed map composition *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 175
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Definition pmap_compose_assoc {A B C D : pType}
           (h : C -&gt;* D) (g : B -&gt;* C) (f : A -&gt;* B)
: (h o* g) o* f ==* h o* (g o* f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 178
Time: 0.013s">
<div class="time" style="width: 0.31746031746032%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros ?; reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 182
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pmap_precompose_idmap {A B : pType} (f : A -&gt;* B)
: f o* pmap_idmap A ==* f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 187
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros ?; reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 191
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pmap_postcompose_idmap {A B : pType} (f : A -&gt;* B)
: pmap_idmap B o* f ==* f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 196
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros ?; reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 200
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Whiskering of pointed homotopies by pointed functions *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pmap_postwhisker {A B C : pType} {f g : A -&gt;* B}
           (h : B -&gt;* C) (p : f ==* g)
: h o* f ==* h o* g.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 207
Time: 0.013s">
<div class="time" style="width: 0.31746031746032%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a; apply ap, p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 211
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pmap_prewhisker {A B C : pType} (f : A -&gt;* B)
           {g h : B -&gt;* C} (p : g ==* h)
: g o* f ==* h o* f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 217
Time: 0.015s">
<div class="time" style="width: 0.36630036630037%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a; apply p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 221
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> refine (concat_p1 _ @ (concat_1p _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 221
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Composition of pointed homotopies *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition phomotopy_compose {A B : pType} {f g h : A -&gt;* B}
           (p : f ==* g) (q : g ==* h)
: f ==* h.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 228
Time: 0.015s">
<div class="time" style="width: 0.36630036630037%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; exact (p x @ q x).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply concat_p1.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 232
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Infix "@*" := phomotopy_compose : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance phomotopy_transitive {A B} : Transitive (@pHomotopy A B)
  := @phomotopy_compose A B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition phomotopy_inverse {A B : pType} {f g : A -&gt;* B}
: (f ==* g) -&gt; (g ==* f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 242
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
  intros p; pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; exact ((p x)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply concat_Vp.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 246
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance phomotopy_symmetric {A B} : Symmetric (@pHomotopy A B)
  := @phomotopy_inverse A B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


Notation "p ^*" := (phomotopy_inverse p) : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Functoriality of loop spaces *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 256
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Definition loops_functor_compose {A B C : pType}
           (g : B -&gt;* C) (f : A -&gt;* B)
: (loops_functor (pmap_compose g f))
   ==* (pmap_compose (loops_functor g) (loops_functor f)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 260
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 261
Time: 0.005s">
<div class="time" style="width: 0.12210012210012%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 263
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    apply whiskerL, whiskerR.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 264
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    refine (_ @ ap (ap g) (concat_1p _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 265
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    refine (_ @ ap (ap g) (concat_p1 _)^).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap_compose.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 268
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 268
Time: 0.017s">
<div class="time" style="width: 0.41514041514042%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition loops_functor_idmap (A : pType)
: loops_functor (pmap_idmap A) ==* pmap_idmap (loops A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 273
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 274
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  simple refine (Build_pHomotopy _ _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 276
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    refine (concat_1p _ @ concat_p1 _ @ ap_idmap _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 278
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 278
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Loop spaces and truncation and connectedness *)

(** The loop space functor decreases the truncation level by one.  *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 283
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance istrunc_loops_functor {n : trunc_index}
       (A B : pType) (f : A -&gt;* B) `{IsTruncMap n.+1 _ _ f}
: IsTruncMap n (loops_functor f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 285
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 286
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold hfiber; simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 287
Time: 0.151s">
<div class="time" style="width: 3.6874236874237%"></div>
<pre>
  refine (trunc_equiv' _ (equiv_functor_sigma' 1 (fun q =&gt; equiv_moveR_Vp _ _ _))); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 288
Time: 0.012s">
<div class="time" style="width: 0.29304029304029%"></div>
<pre>
  refine (trunc_equiv' _ (equiv_functor_sigma' 1 (fun q =&gt; equiv_moveR_pM _ _ _))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 289
Time: 0.007s">
<div class="time" style="width: 0.17094017094017%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** And likewise the connectedness.  *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 292
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance isconnected_loops_functor `{Univalence} {n : trunc_index}
       (A B : pType) (f : A -&gt;* B) `{IsConnMap n.+1 _ _ f}
: IsConnMap n (loops_functor f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 295
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 296
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold hfiber; simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 296
Time: 1.747s">
<div class="time" style="width: 42.661782661783%"></div>
<pre>
  refine (isconnected_equiv' n _ (equiv_functor_sigma' 1 (fun q =&gt; equiv_moveR_Vp _ _ _)) _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 297
Time: 4.095s">
<div class="time" style="width: 100%"></div>
<pre>
  refine (isconnected_equiv' n _ (equiv_functor_sigma' 1 (fun q =&gt; equiv_moveR_pM _ _ _)) _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 298
Time: 0.163s">
<div class="time" style="width: 3.980463980464%"></div>
<pre>
  refine (isconnected_equiv' n _ (hfiber_ap _)^-1 _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 299
Time: 0.01s">
<div class="time" style="width: 0.24420024420024%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 300
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It follows that loop spaces "commute with images". *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 302
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>Definition equiv_loops_image `{Univalence} (n : trunc_index)
           {A B : pType} (f : A -&gt;* B)
: loops (Build_pType (image n.+1 f) (factor1 (image n.+1 f) (point A)))
        &lt;~&gt; image n (loops_functor f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 306
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  set (C := (Build_pType (image n.+1 f) (factor1 (image n.+1 f) (point A)))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose (g := Build_pMap A C (factor1 (image n.+1 f)) 1).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 308
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  pose (h := Build_pMap C B (factor2 (image n.+1 f)) (point_eq f)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  transparent assert (I : (Factorization (@IsConnMap n) (@MapIn n) (loops_functor f))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 311
Time: 1.353s">
<div class="time" style="width: 33.040293040293%"></div>
<pre> refine (@Build_Factorization
              (@IsConnMap n) (@MapIn n) (loops A) (loops B) (loops_functor f)
              (loops C) (loops_functor g) (loops_functor h) _ _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 313
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    intros x; symmetry.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 314
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    refine (_ @ pointed_htpy (loops_functor_compose h g) x).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 315
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 316
Time: 0.01s">
<div class="time" style="width: 0.24420024420024%"></div>
<pre>
    abstract (rewrite !concat_1p; reflexivity).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 317
Time: 0.016s">
<div class="time" style="width: 0.39072039072039%"></div>
<pre>
  exact (path_intermediate
           (path_factor (O_factsys n) (loops_functor f) I (image n (loops_functor f)))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 319
Time: 0.005s">
<div class="time" style="width: 0.12210012210012%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Pointed equivalences *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 323
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>Record pEquiv (A B : pType) :=
  { pointed_equiv_fun : A -&gt;* B ;
    pointed_isequiv : IsEquiv pointed_equiv_fun
  }.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Infix "&lt;~&gt;*" := pEquiv : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Coercion pointed_equiv_fun : pEquiv &gt;-&gt; pMap.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 330
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Global Existing Instance pointed_isequiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 331
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition pointed_equiv_equiv {A B} (f : A &lt;~&gt;* B)
: A &lt;~&gt; B
  := BuildEquiv A B f _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 335
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Coercion pointed_equiv_equiv : pEquiv &gt;-&gt; Equiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 337
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>

Definition pequiv_pmap_idmap {A} : A &lt;~&gt;* A
  := Build_pEquiv _ _ (pmap_idmap _) _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance pequiv_reflexive : Reflexive pEquiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 342
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 343
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro; apply pequiv_pmap_idmap.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 345
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pequiv_inverse {A B} (f : A &lt;~&gt;* B)
: B &lt;~&gt;* A.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 348
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 349
Time: 0.041s">
<div class="time" style="width: 1.001221001221%"></div>
<pre>
  refine (Build_pEquiv B A
            (Build_pMap _ _ f^-1 _)
            _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 352
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  apply moveR_equiv_V; symmetry; apply point_eq.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 353
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 354
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Notation "f ^-1" := (pequiv_inverse f). *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance pequiv_symmetric : Symmetric pEquiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 357
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 358
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros ? ?; apply pequiv_inverse.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 359
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 360
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>

Definition pequiv_compose {A B C : pType}
           (f : A &lt;~&gt;* B) (g : B &lt;~&gt;* C)
: A &lt;~&gt;* C
  := (Build_pEquiv A C (g o* f) isequiv_compose).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 365
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance pequiv_transitive : Transitive pEquiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 367
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 368
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros ? ? ?; apply pequiv_compose.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 369
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 370
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "g o*E f" := (pequiv_compose f g) : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 372
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** ** Equivalences *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 376
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition issig_ptype : { X : Type &amp; X } &lt;~&gt; pType.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 376
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 377
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  issig Build_pType pointed_type ispointed_type.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 378
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 379
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition issig_pmap (A B : pType)
: { f : A -&gt; B &amp; f (point A) = point B } &lt;~&gt; (A -&gt;* B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 382
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 383
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  issig (@Build_pMap A B) (@pointed_fun A B) (@point_eq A B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 384
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 385
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition issig_phomotopy {A B : pType} (f g : A -&gt;* B)
: { p : f == g &amp; p (point A) @ point_eq g = point_eq f } &lt;~&gt; (f ==* g).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 388
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 389
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
  issig (@Build_pHomotopy A B f g) (@pointed_htpy A B f g) (@point_htpy A B f g).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 390
Time: 0.007s">
<div class="time" style="width: 0.17094017094017%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 391
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition equiv_path_pmap `{Funext} {A B : pType} (f g : A -&gt;* B)
: (f ==* g) &lt;~&gt; (f = g).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 394
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 395
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine ((equiv_ap' (issig_pmap A B)^-1 f g)^-1 oE _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 396
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE (issig_phomotopy f g)^-1).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_sigma _ _ _ oE _); cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 398
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine (equiv_functor_sigma' (equiv_path_arrow f g) _); intros p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 399
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 399
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_moveL_Vp _ _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 400
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_path_inverse _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 401
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_concat_l.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 402
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine (transport_paths_Fl (path_forall f g p) (point_eq f) @ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 403
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  apply whiskerR, inverse2.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 404
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine (ap_apply_l (path_forall f g p) (point A) @ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 405
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap10_path_forall.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 406
Time: 0.017s">
<div class="time" style="width: 0.41514041514042%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 407
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition path_pmap `{Funext} {A B : pType} {f g : A -&gt;* B}
: (f ==* g) -&gt; (f = g)
  := equiv_path_pmap f g.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 411
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition issig_pequiv (A B : pType)
: { f : A &lt;~&gt; B &amp; f (point A) = point B } &lt;~&gt; (A &lt;~&gt;* B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 414
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 415
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  transitivity { f : A -&gt;* B &amp; IsEquiv f }.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 416
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  2:issig (@Build_pEquiv A B) (@pointed_equiv_fun A B) (@pointed_isequiv A B).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 417
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  refine ((equiv_functor_sigma'
             (P := fun f =&gt; IsEquiv f.1)
             (issig_pmap A B) (fun f =&gt; equiv_idmap _)) oE _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 420
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  refine (_ oE (equiv_functor_sigma'
                 (Q := fun f =&gt; f.1 (point A) = point B)
                 (issig_equiv A B)^-1
                 (fun f =&gt; equiv_idmap _))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 424
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc _ _)^-1).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 425
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 426
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_functor_sigma' 1 _); intros f; simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 427
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_sigma_symm0.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 428
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 429
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition equiv_path_ptype `{Univalence} (A B : pType)
: (A &lt;~&gt;* B) &lt;~&gt; (A = B :&gt; pType).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 432
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 433
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct A as [A a].</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 434
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct B as [B b].</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 434
Time: 0.006s">
<div class="time" style="width: 0.14652014652015%"></div>
<pre>
  refine (equiv_ap issig_ptype (A;a) (B;b) oE _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 435
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_sigma _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 436
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE (issig_pequiv _ _)^-1); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 437
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_functor_sigma' (equiv_path_universe A B) _); intros f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 438
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_concat_l.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 439
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  apply transport_path_universe.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 440
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 441
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition path_ptype `{Univalence} {A B : pType}
: (A &lt;~&gt;* B) -&gt; (A = B :&gt; pType)
  := equiv_path_ptype A B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 445
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pSect {A B : pType} (s : A -&gt;* B) (r : B -&gt;* A)
  := r o* s ==* pmap_idmap _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 448
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments pSect _ _ / _ _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 450
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition peissect {A B : pType} (f : A &lt;~&gt;* B) : pSect f (pequiv_inverse f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 452
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 453
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 454
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (Build_pHomotopy _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 455
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply (eissect f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 456
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 457
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold moveR_equiv_V.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 458
Time: 0.005s">
<div class="time" style="width: 0.12210012210012%"></div>
<pre>
  rewrite ap_V, concat_p_pp, concat_pV.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 459
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply inverse, concat_1p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 460
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition peisretr {A B : pType} (f : A &lt;~&gt;* B) : pSect (pequiv_inverse f) f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 463
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 464
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 465
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (Build_pHomotopy _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 466
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply (eisretr f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 467
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 468
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold moveR_equiv_V.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 469
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  rewrite ap_pp.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  generalize (point_eq f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 471
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 472
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  cbn in p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 473
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 474
Time: 0.094s">
<div class="time" style="width: 2.2954822954823%"></div>
<pre>
  hott_simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 475
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply eisadj.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 476
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 477
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pequiv_adjointify {A B : pType} (f : A -&gt;* B) (f' : B -&gt;* A)
  (r : pSect f' f) (s : pSect f f') : A &lt;~&gt;* B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 480
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 481
Time: 0.078s">
<div class="time" style="width: 1.9047619047619%"></div>
<pre>
  serapply Build_pEquiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 482
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: assumption.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 483
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  serapply (isequiv_adjointify f f').</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 484
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply r.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 485
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply s.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 486
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 487
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Loop spaces *)

(** Loop inversion is a pointed equivalence *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 491
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition loops_inv (A : pType) : loops A &lt;~&gt;* loops A.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 491
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 492
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (Build_pEquiv _ _ (Build_pMap (loops A) (loops A) inverse 1)
                       (isequiv_path_inverse _ _)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 494
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 495
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition phomotopy_ap `{Funext} {A B C D: pType} (f g : A -&gt;* B)
  (h : (A -&gt;* B) -&gt; (C -&gt;* D))
  : f ==* g -&gt; h f ==* h g.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 499
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 500
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 501
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
  by destruct (path_pmap p).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 502
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 503
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition loops_functor_equiv `{Funext} (A B : pType)
  : A &lt;~&gt;* B -&gt; loops A &lt;~&gt;* loops B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 506
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 507
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 508
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  serapply pequiv_adjointify.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 509
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  1: apply loops_functor, f.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 510
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply loops_functor, (pequiv_inverse f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 511
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
  1,2: refine ((loops_functor_compose _ _)^* @* _ @* loops_functor_idmap _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 512
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  1,2: apply phomotopy_ap.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 513
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply peisretr.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 514
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply peissect.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 515
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 516
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Pointed fibers *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 519
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pfiber {A B : pType} (f : A -&gt;* B) : pType.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 519
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 520
Time: 1.963s">
<div class="time" style="width: 47.936507936508%"></div>
<pre>
  refine (Build_pType (hfiber f (point B)) _); try exact _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 521
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists (point A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 522
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply point_eq.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 523
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 524
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition pfib {A B : pType} (f : A -&gt;* B) : pfiber f -&gt;* A
  := (Build_pMap (pfiber f) A pr1 1).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 527
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The double fiber object is equivalent to loops on the base. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 529
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pfiber2_loops {A B : pType} (f : A -&gt;* B)
: pfiber (pfib f) &lt;~&gt;* loops B.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 530
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 531
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply issig_pequiv; simple refine (_;_).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 532
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 533
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl; unfold hfiber.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 533
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ oE (equiv_sigma_assoc _ _)^-1); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 534
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
    refine (_ oE (equiv_functor_sigma'
                   (P := fun a =&gt; {_ : f a = point B &amp; a = point A})
                   (Q := fun a =&gt; {_ : a = point A &amp; f a = point B })
                   1 (fun a =&gt; equiv_sigma_symm0 _ _))).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 538
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    refine (_ oE equiv_sigma_assoc _ (fun a =&gt; f a.1 = point B)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 539
Time: 0.022s">
<div class="time" style="width: 0.53724053724054%"></div>
<pre>
    refine (_ oE equiv_contr_sigma _); simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 540
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_concat_l.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 541
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    symmetry; apply point_eq.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 542
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 543
Time: 0.016s">
<div class="time" style="width: 0.39072039072039%"></div>
<pre> simpl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 543
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply concat_Vp.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 544
Time: 0.011s">
<div class="time" style="width: 0.26862026862027%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 545
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The triple-fiber functor is equal to the negative of the loopspace functor. *)</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 547
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>Definition pfiber2_loops_functor {A B : pType} (f : A -&gt;* B)
: loops_inv _ o* pfiber2_loops f o* pfib (pfib (pfib f))
  ==* loops_functor f o* pfiber2_loops (pfib f).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 549
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 550
Time: 0.16s">
<div class="time" style="width: 3.9072039072039%"></div>
<pre>
  pointed_reduce.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 551
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
  simple refine (Build_pHomotopy _ _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 552
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 553
Time: 0.028s">
<div class="time" style="width: 0.68376068376068%"></div>
<pre> intros [[xp q] r].</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 553
Time: 0.01s">
<div class="time" style="width: 0.24420024420024%"></div>
<pre> simpl in *.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 553
Time: 0.014s">
<div class="time" style="width: 0.34188034188034%"></div>
<pre>
    rewrite !transport_paths_Fl.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 554
Time: 0.069s">
<div class="time" style="width: 1.6849816849817%"></div>
<pre>
    rewrite inv_pp, !ap_V, !inv_V, ap_compose, !ap_pp, inv_pp.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 555
Time: 0.024s">
<div class="time" style="width: 0.58608058608059%"></div>
<pre>
    simpl; rewrite !concat_1p, !concat_p1.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 556
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
    rewrite ap_pr1_path_basedpaths'.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 557
Time: 0.006s">
<div class="time" style="width: 0.14652014652015%"></div>
<pre>
    rewrite ap_V, inv_V; apply whiskerR.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 558
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
    match goal with
        |- ?a = ap f (ap ?g ?z) =&gt;
        change (a = ap f (ap (pr1 o pr1) z))
    end.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 562
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
    rewrite (ap_compose pr1 pr1).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 563
Time: 0.008s">
<div class="time" style="width: 0.1953601953602%"></div>
<pre>
    rewrite ap_pr1_path_basedpaths'.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 564
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    (** In order to destruct [r], we have to invert it to match Paulin-Mohring path induction.  I don't know why the [set] fails to catch the [r^] in the conclusion. *)
   </pre>
</div>
<div class="code" title="File: Pointed.v
Line: 566
Time: 0.012s">
<div class="time" style="width: 0.29304029304029%"></div>
<pre>set (s := r^); change ((xp.2)^ = ap f (ap pr1 s)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 566
Time: 0.003s">
<div class="time" style="width: 0.073260073260073%"></div>
<pre>
    clearbody s; clear r; destruct s; reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 567
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 568
Time: 0.18s">
<div class="time" style="width: 4.3956043956044%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 568
Time: 0.217s">
<div class="time" style="width: 5.2991452991453%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 569
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "X * Y" := (Build_pType (X * Y) ispointed_prod) : pointed_scope.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 571
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Lemma loops_prod `{Univalence} (X Y : pType)
  : loops (X * Y) &lt;~&gt;* loops X * loops Y.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 574
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 575
Time: 2.647s">
<div class="time" style="width: 64.639804639805%"></div>
<pre>
  serapply Build_pEquiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 576
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 577
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> serapply Build_pMap.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 577
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 578
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro p.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 578
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 578
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>
      by apply (equiv_path_prod (point X, point Y) (point X, point Y))^-1%equiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 579
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 580
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 581
Time: 1.469s">
<div class="time" style="width: 35.873015873016%"></div>
<pre> exact _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 581
Time: 0.009s">
<div class="time" style="width: 0.21978021978022%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 582
Time: 0.002s">
<div class="time" style="width: 0.048840048840049%"></div>
<pre>

Lemma iterated_loops_prod `{Univalence} (X Y : pType) {n}
  : iterated_loops n (X * Y) &lt;~&gt;* (iterated_loops n X) * (iterated_loops n Y).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 585
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 586
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  induction n.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 587
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 588
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 588
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  +</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 589
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> refine (pequiv_compose _ (loops_prod _ _)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 589
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
    by apply loops_functor_equiv.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 590
Time: 0.004s">
<div class="time" style="width: 0.097680097680098%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 591
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Truncations *)

</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 594
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>Global Instance ispointed_tr (n : trunc_index) (A : Type) `{IsPointed A}
: IsPointed (Tr n A)
  := tr (point A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 596
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition pTr (n : trunc_index) (A : pType) : pType
  := Build_pType (Tr n A) _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 599
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition pTr_functor {X Y : pType} (n : trunc_index) (f : X -&gt;* Y)
: pTr n X -&gt;* pTr n Y.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 602
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 603
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (Build_pMap (pTr n X) (pTr n Y) (Trunc_functor n f) _).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 604
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (ap (@tr n Y) (point_eq f)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 605
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 606
Time: 0.04s">
<div class="time" style="width: 0.97680097680098%"></div>
<pre>

Definition pTr_pequiv {X Y : pType} (n : trunc_index) (f : X &lt;~&gt;* Y)
: pTr n X &lt;~&gt;* pTr n Y
  := Build_pEquiv _ _ (pTr_functor n f) _.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 610
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition ptr_loops `{Univalence} (n : trunc_index) (A : pType)
: pTr n (loops A) &lt;~&gt;* loops (pTr n.+1 A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 613
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 614
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (issig_pequiv _ _ (_;_)).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 615
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 616
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre> apply equiv_path_Tr.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 616
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 617
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 617
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 618
Time: 0.001s">
<div class="time" style="width: 0.024420024420024%"></div>
<pre>

Definition ptr_loops_eq `{Univalence} (n : trunc_index) (A : pType)
: pTr n (loops A) = loops (pTr n.+1 A) :&gt; pType
  := path_ptype (ptr_loops n A).</pre>
</div>
<div class="code" title="File: Pointed.v
Line: 623
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

