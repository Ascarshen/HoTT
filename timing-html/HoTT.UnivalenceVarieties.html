<html>
<head>
<title>UnivalenceVarieties.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for UnivalenceVarieties.v</h1>

<div class="code" title="File: UnivalenceVarieties.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)
(** * Varieties of univalence *)

</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 3
Time: 0.042s">
<div class="time" style="width: 18.260869565217%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 3
Time: 0.23s">
<div class="time" style="width: 100%"></div>
<pre>
Require Import Fibrations Idempotents EquivalenceVarieties UnivalenceImpliesFunext.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The standard univalence axiom type [Univalence_type] is defined in [UnivalenceImpliesFunext]. *)

(** A weaker form that only asserts that we can make equivalences into paths with a computation rule (no uniqueness rule). *)</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 9
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>Definition WeakUnivalence :=
  { etop : forall A B, (A &lt;~&gt; B) -&gt; (A = B) &amp;
    forall A B (f : A &lt;~&gt; B), equiv_path A B (etop A B f) = f }.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The same thing, stated with an incoherent notion of equivalence but a pointwise equality for the computation rule.  *)</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 13
Time: 0.004s">
<div class="time" style="width: 1.7391304347826%"></div>
<pre>Definition IncoherentWeakUnivalence :=
  { etop : forall A B (f : A -&gt; B) (g : B -&gt; A),
      (f o g == idmap) -&gt; (g o f == idmap) -&gt; (A = B) &amp;
    forall A B f g H K, equiv_path A B (etop A B f g H K) == f }.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Finally, it even suffices to consider only just a few special cases. This is due to Ian Orton and Andrew Pitts. *)</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 18
Time: 0.019s">
<div class="time" style="width: 8.2608695652174%"></div>
<pre>Record VeryWeakUnivalence :=
  { unit : forall A, A = { a : A &amp; Unit };
    flip : forall A B (C : A -&gt; B -&gt; Type),
        { a : A &amp; { b : B &amp; C a b }} = { b : B &amp; { a : A &amp; C a b }};
    contract : forall A, Contr A -&gt; A = Unit;
    unit_comp : forall A a, transport idmap (unit A) a = (a;tt);
    flip_comp : forall A B C (a:A) (b:B) (c : C a b),
        transport idmap (flip A B C) (a ; (b ; c)) = (b ; (a ; c))
  }.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Theorem WeakUnivalence_implies_Univalence :
  WeakUnivalence -&gt; Univalence_type.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 30
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
  intros [etop H] A.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply isequiv_from_functor_sigma.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 32
Time: 0.004s">
<div class="time" style="width: 1.7391304347826%"></div>
<pre>
  refine (@isequiv_contr_contr _ {B:Type &amp; A &lt;~&gt; B} (contr_basedpaths A) _ _).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 33
Time: 0.002s">
<div class="time" style="width: 0.8695652173913%"></div>
<pre>
  refine (contr_retracttype
            (Build_RetractOf _ {B:Type &amp; A &lt;~&gt; B}
                             (fun Be =&gt; (Be.1 ; equiv_path A Be.1 Be.2))
                             (fun Bf =&gt; (Bf.1 ; etop A Bf.1 Bf.2))
                             _)
            (contr_basedpaths A)).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
  intros [B f].</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (path_sigma' (fun B =&gt; A &lt;~&gt; B) 1 (H A B f)).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 41
Time: 0.002s">
<div class="time" style="width: 0.8695652173913%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** For this one and the next one, we need to assume funext to start with (so that these forms of univalence, unlike the usual one, probably don't suffice to prove funext from). *)</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Theorem IncoherentWeakUnivalence_implies_Univalence `{Funext} :
  IncoherentWeakUnivalence -&gt; Univalence_type.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 46
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
  intros [etop K].</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply WeakUnivalence_implies_Univalence.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  transparent assert (etop' : (forall A B, (A &lt;~&gt; B) -&gt; (A = B))).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B f.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 50
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
    refine (etop A B f f^-1 _ _).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; apply eisretr.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; apply eissect.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists etop'.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros A B f.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 55
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
  apply path_equiv, path_arrow, K.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 56
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Theorem VeryWeakUnivalence_implies_Univalence `{Funext} :
  VeryWeakUnivalence -&gt; Univalence_type.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros vwu.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply WeakUnivalence_implies_Univalence.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (_;_).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B f.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 64
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
    refine (unit vwu A @ _ @ (unit vwu B)^).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 65
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
    refine (_ @ flip vwu A B (fun a b =&gt; f a = b) @ _).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 67
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre> apply ap, path_arrow; intros a.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 67
Time: 0.002s">
<div class="time" style="width: 0.8695652173913%"></div>
<pre>
      symmetry; apply (contract vwu).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply contr_basedpaths.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 69
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 70
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre> apply ap, path_arrow; intros b.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 70
Time: 0.002s">
<div class="time" style="width: 0.8695652173913%"></div>
<pre>
      apply (contract vwu), fcontr_isequiv; exact _.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros A B f.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 72
Time: 0.003s">
<div class="time" style="width: 1.304347826087%"></div>
<pre>
    apply path_equiv, path_arrow; intros a; cbn.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 73
Time: 0.016s">
<div class="time" style="width: 6.9565217391304%"></div>
<pre>
    rewrite !transport_pp.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
    refine (moveR_transport_V idmap (unit vwu B) _ (f a) _).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 75
Time: 0.016s">
<div class="time" style="width: 6.9565217391304%"></div>
<pre>
    rewrite !(unit_comp vwu).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 76
Time: 0.069s">
<div class="time" style="width: 30%"></div>
<pre>
    rewrite &lt;- !transport_compose.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 77
Time: 0.007s">
<div class="time" style="width: 3.0434782608696%"></div>
<pre>
    rewrite (transport_sigma' (C := fun P (a0:A) =&gt; P a0)); cbn.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 78
Time: 0.01s">
<div class="time" style="width: 4.3478260869565%"></div>
<pre>
    assert (p : (transport (fun x : A -&gt; Type0 =&gt; x a)
                   (path_arrow (fun _ : A =&gt; Unit)
                      (fun a0 : A =&gt; {b : B &amp; f a0 = b})
                      (fun a0 : A =&gt;
                         (contract vwu {b : B &amp; f a0 = b}
                           (contr_basedpaths (f a0)))^)) tt)
                = (f a ; 1))
      by apply path_contr.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 86
Time: 0.003s">
<div class="time" style="width: 1.304347826087%"></div>
<pre>
    rewrite p; clear p.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 87
Time: 0.005s">
<div class="time" style="width: 2.1739130434783%"></div>
<pre>
    rewrite (flip_comp vwu).</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 88
Time: 0.003s">
<div class="time" style="width: 1.304347826087%"></div>
<pre>
    rewrite transport_sigma'; cbn.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 89
Time: 0.001s">
<div class="time" style="width: 0.43478260869565%"></div>
<pre>
    apply ap, path_contr.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 90
Time: 0.028s">
<div class="time" style="width: 12.173913043478%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: UnivalenceVarieties.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

