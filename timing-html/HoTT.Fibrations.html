<html>
<head>
<title>Fibrations.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Fibrations.v</h1>

<div class="code" title="File: Fibrations.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)
(** * Basic facts about fibrations *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 3
Time: 0.039s">
<div class="time" style="width: 23.926380368098%"></div>
<pre>Require Import HoTT.Basics HoTT.Types HProp EquivalenceVarieties.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* ** Homotopy fibers *)

(** Paths in homotopy fibers can be constructed using [path_sigma] and [transport_paths_Fl]. *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 11
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>Definition equiv_path_hfiber {A B : Type} {f : A -&gt; B} {y : B}
  (x1 x2 : hfiber f y)
: { q : x1.1 = x2.1 &amp; x1.2 = ap f q @ x2.2 } &lt;~&gt; (x1 = x2).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_sigma _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros p; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_moveR_Vp _ _ _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (equiv_concat_l (transport_paths_Fl _ _) _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 19
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 20
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>

Definition path_hfiber_uncurried {A B : Type} {f : A -&gt; B} {y : B}
  {x1 x2 : hfiber f y}
: { q : x1.1 = x2.1 &amp; x1.2 = ap f q @ x2.2 } -&gt; (x1 = x2)
  := equiv_path_hfiber x1 x2.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 25
Time: 0.003s">
<div class="time" style="width: 1.840490797546%"></div>
<pre>

Definition path_hfiber {A B : Type} {f : A -&gt; B} {y : B}
  {x1 x2 : hfiber f y} (q : x1.1 = x2.1) (r : x1.2 = ap f q @ x2.2)
: x1 = x2
:= path_hfiber_uncurried (q;r).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** If we rearrange this a bit, then it characterizes the fibers of [ap]. *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 33
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>Definition hfiber_ap {A B : Type} {f : A -&gt; B} {x1 x2 : A}
           (p : f x1 = f x2)
: hfiber (ap f) p &lt;~&gt; ((x1 ; p) = (x2 ; 1) :&gt; hfiber f (f x2)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_path_hfiber (x1;p) (x2;1%path) oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros q.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_path_inverse _ _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (equiv_concat_r (concat_p1 _)^ _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 41
Time: 0.003s">
<div class="time" style="width: 1.840490797546%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Homotopic maps have equivalent fibers. *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_hfiber_homotopic
           {A B : Type} (f g : A -&gt; B) (h : f == g) (b : B)
: hfiber f b &lt;~&gt; hfiber g b.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 48
Time: 0.006s">
<div class="time" style="width: 3.680981595092%"></div>
<pre>
  refine (Build_Equiv _ _ (fun fx =&gt; (fx.1 ; (h fx.1)^ @ fx.2)) _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 49
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>
  refine (isequiv_adjointify _ (fun gx =&gt; (gx.1 ; (h gx.1) @ gx.2)) _ _);
    intros [a p]; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply ap, concat_V_pp.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 53
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre> apply ap, concat_p_Vp.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 53
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Commutative squares induce maps between fibers. *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 57
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>Definition functor_hfiber {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h) (b : B)
: hfiber f b -&gt; hfiber g (k b).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 61
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  unshelve rapply @functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact h.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a e; exact ((p a)^ @ ap k e).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The 3x3 lemma *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 68
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>Definition hfiber_functor_hfiber {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h) (b : B) (c : C) (q : g c = k b)
: hfiber (functor_hfiber p b) (c;q)
  &lt;~&gt; hfiber (functor_hfiber (fun x =&gt; (p x)^) c) (b;q^).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber, functor_hfiber, functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc _ _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 76
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  apply equiv_functor_sigma_id; intros a; cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE (equiv_functor_sigma_id _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2:intros; apply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 79
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  refine (equiv_functor_sigma_id _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1:intros; apply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_sigma_symm _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros r.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 83
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros s; cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 84
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  refine (equiv_concat_l (transport_paths_Fl _ _) _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 85
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  refine (_ oE (equiv_concat_l (transport_paths_Fl _ _) _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 86
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
  refine ((equiv_ap inverse _ _)^-1 oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_concat_r (inv_V q)^ _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_concat_l.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 89
Time: 0.021s">
<div class="time" style="width: 12.883435582822%"></div>
<pre>
  abstract (rewrite !inv_pp, !inv_V, concat_pp_p; reflexivity).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 90
Time: 0.026s">
<div class="time" style="width: 15.950920245399%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Replacing a map with a fibration *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_fibration_replacement  {B C} (f:C -&gt;B):
  C &lt;~&gt; {y:B &amp; hfiber f y}.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 96
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  simple refine (Build_Equiv _ _ _ (Build_IsEquiv
               C {y:B &amp; {x:C &amp; f x = y}}
               (fun c =&gt; (f c; (c; idpath)))
               (fun c =&gt; c.2.1)
               _
               (fun c =&gt; idpath)
               _)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 104
Time: 0.003s">
<div class="time" style="width: 1.840490797546%"></div>
<pre> intros [? [? []]]; reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 105
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 105
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition hfiber_fibration {X} (x : X) (P:X-&gt;Type):
    P x &lt;~&gt; @hfiber (sigT P) X pr1 x.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 110
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
  simple refine (Build_Equiv _ _ _ (Build_IsEquiv
               (P x) { z : sigT P &amp; z.1 = x }
               (fun Px =&gt; ((x; Px); idpath))
               (fun Px =&gt; transport P Px.2 Px.1.2)
               _
               (fun Px =&gt; idpath)
               _)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 118
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre> intros [[] []]; reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 119
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 119
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Exercise 4.4: The unstable octahedral axiom. *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section UnstableOctahedral.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (n:trunc_index) {A B C} (f : A -&gt; B) (g : B -&gt; C).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 125
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>

  Definition hfiber_compose_map (b : B)
  : hfiber (g o f) (g b) -&gt; hfiber g (g b)
    := fun x =&gt; (f x.1 ; x.2).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition hfiber_hfiber_compose_map (b : B)
  : hfiber (hfiber_compose_map b) (b;1) &lt;~&gt; hfiber f b.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold hfiber, hfiber_compose_map.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 134
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
    refine (_ oE (equiv_sigma_assoc _ _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_functor_sigma_id; intros a; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (_ oE _); revgoals.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 138
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre> refine (equiv_functor_sigma_id
                (fun p =&gt; (equiv_path_sigma _ _ _)^-1)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (_ oE equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply equiv_sigma_contr; intros p.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 141
Time: 0.008s">
<div class="time" style="width: 4.9079754601227%"></div>
<pre>
      destruct p; simpl; exact _.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 142
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 143
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>

  Definition hfiber_compose (c : C)
  : hfiber (g o f) c &lt;~&gt; { w : hfiber g c &amp; hfiber f w.1 }.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold hfiber.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_functor_sigma_id _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: intros; apply equiv_sigma_symm.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_sigma_symm _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply equiv_functor_sigma_id; intros a; cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_functor_sigma_id _ oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: intros; apply equiv_sigma_symm0.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine ((equiv_sigma_assoc' _ _)^-1 oE _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 157
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
    refine (_ oE equiv_contr_sigma _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 158
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 159
Time: 0.018s">
<div class="time" style="width: 11.042944785276%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Global Instance istruncmap_compose `{!IsTruncMap n g} `{!IsTruncMap n f}
    : IsTruncMap n (g o f).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 163
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros c.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 165
Time: 0.125s">
<div class="time" style="width: 76.687116564417%"></div>
<pre>
    exact (trunc_equiv _ (hfiber_compose c)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 167
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>

End UnstableOctahedral.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** ** Fibers of constant functions *)</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition hfiber_constant A {B} (y y' : B)
  : hfiber (fun _ : A =&gt; y) y' &lt;~&gt; A * (y = y')
  := equiv_sigma_prod0 A (y = y').</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 174
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>

Global Instance istruncmap_constant n {A B} `{!IsTrunc n A}
       (y : B) `{!forall y', IsTrunc n (y = y')}
  : IsTruncMap n (fun _ : A =&gt; y)
  := fun y' =&gt; _.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Fibers of [functor_sigma] *)

</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 182
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>Definition hfiber_functor_sigma {A B} (P : A -&gt; Type) (Q : B -&gt; Type)
           (f : A -&gt; B) (g : forall a, P a -&gt; Q (f a))
           (b : B) (v : Q b)
: (hfiber (functor_sigma f g) (b; v)) &lt;~&gt;
  {w : hfiber f b &amp; hfiber (g w.1) ((w.2)^ # v)}.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber, functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_functor_sigma_id _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2:intros; symmetry; apply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc P _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_functor_sigma_id _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2:intros a; cbn; apply equiv_sigma_symm.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_sigma_assoc' _ _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros [a p]; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_functor_sigma_id; intros u; simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_moveL_transport_V.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 197
Time: 0.006s">
<div class="time" style="width: 3.680981595092%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 198
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>

Global Instance istruncmap_functor_sigma n {A B P Q}
       (f : A -&gt; B) (g : forall a, P a -&gt; Q (f a))
       {Hf : IsTruncMap n f} {Hg : forall a, IsTruncMap n (g a)}
  : IsTruncMap n (functor_sigma f g).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros [a b].</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 205
Time: 0.111s">
<div class="time" style="width: 68.098159509202%"></div>
<pre>
  exact (trunc_equiv _ (hfiber_functor_sigma _ _ _ _ _ _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 206
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Theorem 4.7.6 *)</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 209
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>Definition hfiber_functor_sigma_idmap {A} (P Q : A -&gt; Type)
           (g : forall a, P a -&gt; Q a)
           (b : A) (v : Q b)
: (hfiber (functor_sigma idmap g) (b; v)) &lt;~&gt;
   hfiber (g b) v.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE hfiber_functor_sigma P Q idmap g b v).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 215
Time: 0.004s">
<div class="time" style="width: 2.4539877300613%"></div>
<pre>
  exact (equiv_contr_sigma
           (fun (w:hfiber idmap b) =&gt; hfiber (g w.1) (transport Q (w.2)^ v))).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition istruncmap_from_functor_sigma n {A P Q}
           (g : forall a : A, P a -&gt; Q a)
           `{!IsTruncMap n (functor_sigma idmap g)}
  : forall a, IsTruncMap n (g a).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a v.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 225
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
  exact (trunc_equiv' _ (hfiber_functor_sigma_idmap _ _ _ _ _)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition isequiv_from_functor_sigma {A} (P Q : A -&gt; Type)
           (g : forall a, P a -&gt; Q a)
           `{IsEquiv _ _ (functor_sigma idmap g)}
: forall (a : A), IsEquiv (g a).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a; apply isequiv_fcontr.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply istruncmap_from_functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  red; by apply fcontr_isequiv.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Theorem 4.7.7 *)</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_total_iff_equiv_fiberwise {A} (P Q : A -&gt; Type)
           (g : forall a, P a -&gt; Q a)
: IsEquiv (functor_sigma idmap g) &lt;-&gt; forall a, IsEquiv (g a).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  split.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply isequiv_from_functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro H.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply isequiv_functor_sigma.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Fibers of [functor_prod] *)</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition hfiber_functor_prod {A B C D}
           (f : A -&gt; B) (g : C -&gt; D) y
  : hfiber (Prod.functor_prod f g) y &lt;~&gt; (hfiber f (fst y) * hfiber g (snd y)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold Prod.functor_prod.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srefine (equiv_adjointify _ _ _ _).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 254
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre> exact (fun x =&gt; ((fst x.1; ap fst x.2), (snd x.1; ap snd x.2))).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (fun xs =&gt; (((fst xs).1, (snd xs).1); _)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply Prod.path_prod;simpl.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fst xs).2.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    +</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (snd xs).2.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 259
Time: 0.029s">
<div class="time" style="width: 17.791411042945%"></div>
<pre> destruct y as [y1 y2]; intros [[x1 p1] [x2 p2]].</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 260
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre> destruct p1,p2.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 261
Time: 0.012s">
<div class="time" style="width: 7.361963190184%"></div>
<pre> intros [[x1 x2] p].</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 261
Time: 0.011s">
<div class="time" style="width: 6.7484662576687%"></div>
<pre> destruct p;cbn.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 261
Time: 0.041s">
<div class="time" style="width: 25.153374233129%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 262
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>

Global Instance istruncmap_functor_prod n {A B C D}
       (f : A -&gt; B) (g : C -&gt; D)
       `{!IsTruncMap n f} `{!IsTruncMap n g}
  : IsTruncMap n (Prod.functor_prod f g).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 268
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros y.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 269
Time: 0.163s">
<div class="time" style="width: 100%"></div>
<pre>
  exact (trunc_equiv _ (hfiber_functor_prod _ _ _)^-1).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 270
Time: 0.001s">
<div class="time" style="width: 0.61349693251534%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** [IsTruncMap n.+1 f &lt;-&gt; IsTruncMap n (ap f)] *)</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 273
Time: 0.005s">
<div class="time" style="width: 3.0674846625767%"></div>
<pre>Global Instance istruncmap_ap {A B} n (f:A -&gt; B) `{!IsTruncMap n.+1 f}
  : forall x y, IsTruncMap n (@ap _ _ f x y)
  := fun x x' y =&gt;
       trunc_equiv' _ (hfiber_ap y)^-1.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition istruncmap_from_ap {A B} n (f:A -&gt; B) `{!forall x y, IsTruncMap n (@ap _ _ f x y)}
  : IsTruncMap n.+1 f.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 280
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>
  intros y [a p] [b q];
    destruct q;
    exact (trunc_equiv' _ (hfiber_ap p)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 283
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 284
Time: 0.009s">
<div class="time" style="width: 5.521472392638%"></div>
<pre>

Definition equiv_istruncmap_ap `{Funext} {A B} n (f:A -&gt; B)
  : IsTruncMap n.+1 f &lt;~&gt; (forall x y, IsTruncMap n (@ap _ _ f x y))
  := equiv_iff_hprop (@istruncmap_ap _ _ n f) (@istruncmap_from_ap _ _ n f).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance isequiv_ap_isembedding {A B} (f : A -&gt; B) `{!IsEmbedding f}
  : forall x y, IsEquiv (@ap _ _ f x y).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros x y.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 293
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre> apply isequiv_fcontr,_.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 294
Time: 0.002s">
<div class="time" style="width: 1.2269938650307%"></div>
<pre>

Definition equiv_ap_isembedding {A B} (f : A -&gt; B) `{!IsEmbedding f} (x y : A)
  : (x = y) &lt;~&gt; (f x = f y)
  := Build_Equiv _ _ (ap f) _.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 298
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition isembedding_isequiv_ap {A B} (f : A -&gt; B) `{!forall x y, IsEquiv (@ap _ _ f x y)}
  : IsEmbedding f.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 301
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 302
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply istruncmap_from_ap.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 303
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x y;red;apply fcontr_isequiv,_.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 303
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition equiv_isequiv_ap_isembedding `{Funext} {A B} (f : A -&gt; B)
  : IsEmbedding f &lt;~&gt; (forall x y, IsEquiv (@ap _ _ f x y)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 308
Time: 0.007s">
<div class="time" style="width: 4.2944785276074%"></div>
<pre>
  exact (equiv_iff_hprop (@isequiv_ap_isembedding _ _ f) (@isembedding_isequiv_ap _ _ f)).</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Fibrations.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

