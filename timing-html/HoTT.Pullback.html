<html>
<head>
<title>Pullback.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Pullback.v</h1>

<div class="code" title="File: Pullback.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 1
Time: 0.04s">
<div class="time" style="width: 100%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 1
Time: 0.008s">
<div class="time" style="width: 20%"></div>
<pre>
Require Import Fibrations.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Pullbacks *)

(** The pullback as an object *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 8
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>Definition Pullback {A B C} (f : B -&gt; A) (g : C -&gt; A)
  := { b : B &amp; { c : C &amp; f b = g c }}.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Arguments Pullback {A B C}%type_scope (f g)%function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The universal commutative square *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition pullback_pr1 {A B C} {f : B -&gt; A} {g : C -&gt; A}
: Pullback f g -&gt; B := (fun z =&gt; z.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 14
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
Definition pullback_pr2 {A B C} {f : B -&gt; A} {g : C -&gt; A}
: Pullback f g -&gt; C := (fun z =&gt; z.2.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 16
Time: 0.008s">
<div class="time" style="width: 20%"></div>
<pre>
Definition pullback_commsq {A B C} (f : B -&gt; A) (g : C -&gt; A)
: f o pullback_pr1 == g o pullback_pr2
:= (fun z =&gt; z.2.2).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The universally induced map into it by any commutative square *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 21
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>Definition pullback_corec {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h)
: A -&gt; Pullback k g
:= fun a =&gt; (f a ; h a ; p a).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Symmetry of the pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 27
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>Definition equiv_pullback_symm {A B C} (f : B -&gt; A) (g : C -&gt; A)
: Pullback f g &lt;~&gt; Pullback g f.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (_ oE equiv_sigma_symm (fun b c =&gt; f b = g c)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_functor_sigma' 1 _); intros c.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 31
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
  refine (equiv_functor_sigma' 1 _); intros b.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_path_inverse.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.

(** Pullback over [Unit] is equivalent to a product. *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_pullback_unit_prod (A B : Type)
: Pullback (@const A Unit tt) (@const B Unit tt) &lt;~&gt; A * B.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simple refine (equiv_adjointify _ _ _ _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 40
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre> intros [a [b _]]; exact (a , b).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [a b]; exact (a ; b ; 1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [a b]; exact 1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 43
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre> intros [a [b p]]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (path_sigma' _ 1); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (path_sigma' _ 1); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 45
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>
    apply path_contr.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.

(** The property of a given commutative square being a pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 49
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>Definition IsPullback {A B C D}
           {f : A -&gt; B} {g : C -&gt; D} {h : A -&gt; C} {k : B -&gt; D}
           (p : k o f == g o h)
  := IsEquiv (pullback_corec p).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The pullback of a map along another one *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 54
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>Definition pullback_along {A B C} (f : B -&gt; A) (g : C -&gt; A)
: Pullback f g -&gt; B
  := pr1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "f ^*" := (pullback_along f) : function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition hfiber_pullback_along {A B C} (f : B -&gt; A) (g : C -&gt; A) (b:B)
: hfiber (f ^* g) b &lt;~&gt; hfiber g (f b).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber, Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 63
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc (fun b' =&gt; {c : C &amp; f b' = g c})
                                 (fun x =&gt; (f^* g) x = b))^-1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 66
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
  refine (_ oE (@equiv_functor_sigma'
                 B (fun b' =&gt; {_ : {c:C &amp; f b' = g c} &amp; b' = b})
                 B (fun b' =&gt; {_ : b' = b &amp; {c:C &amp; f b' = g c}})
                 1
                 (fun b' =&gt; equiv_sigma_symm0 {c:C &amp; f b' = g c} (b' = b)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 71
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc (fun b' =&gt; b' = b)
                                 (fun b'p =&gt; {c:C &amp; f b'p.1 = g c}))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 73
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>
  refine (_ oE equiv_contr_sigma _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (equiv_functor_sigma' 1 (fun c =&gt; equiv_path_inverse _ _)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.

(** And the dual sort of pullback *)</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 78
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>Definition pullback_along' {A B C} (g : C -&gt; A) (f : B -&gt; A)
: Pullback f g -&gt; C
  := fun z =&gt; z.2.1.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments pullback_along' / .</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "g ^*'" := (pullback_along' g) : function_scope.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 84
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>

Definition hfiber_pullback_along' {A B C} (g : C -&gt; A) (f : B -&gt; A) (c:C)
: hfiber (g ^*' f) c &lt;~&gt; hfiber f (g c).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold hfiber, Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 89
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc (fun b' =&gt; {c : C &amp; f b' = g c})
                                 (fun x =&gt; (g^*' f) x = c))^-1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (equiv_functor_sigma' 1 _); intros b.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 92
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc (fun c' =&gt; f b = g c')
                                 (fun x =&gt; (g^*' f) (b;x) = c))^-1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 95
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
  refine (_ oE (@equiv_functor_sigma'
                 C (fun c' =&gt; {_ : f b = g c' &amp; c' = c})
                 C (fun c' =&gt; {_ : c' = c &amp; f b = g c'})
                 1
                 (fun c' =&gt; equiv_sigma_symm0 (f b = g c') (c' = c)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 100
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
  refine (_ oE (equiv_sigma_assoc (fun c' =&gt; c' = c)
                                 (fun c'p =&gt; f b = g c'p.1))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 102
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>
  refine (_ oE equiv_contr_sigma _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 103
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_idmap.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.

</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Functor_Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 106
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>

  Context {A1 B1 C1 A2 B2 C2}
          (f1 : B1 -&gt; A1) (g1 : C1 -&gt; A1)
          (f2 : B2 -&gt; A2) (g2 : C2 -&gt; A2)
          (h : A1 -&gt; A2) (k : B1 -&gt; B2) (l : C1 -&gt; C2)
          (p : f2 o k == h o f1) (q : g2 o l == h o g1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 112
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>

  Definition functor_pullback : Pullback f1 g1 -&gt; Pullback f2 g2
    := functor_sigma k
        (fun b1 =&gt; (functor_sigma l
                     (fun c1 e1 =&gt; p b1 @ ap h e1 @ (q c1)^))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 117
Time: 0.005s">
<div class="time" style="width: 12.5%"></div>
<pre>

  Definition hfiber_functor_pullback (z : Pullback f2 g2)
  : hfiber functor_pullback z
    &lt;~&gt; Pullback (transport (hfiber h) z.2.2 o functor_hfiber (k := f2) p z.1)
                 (functor_hfiber q z.2.1).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 123
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>
    destruct z as [b2 [c2 e2]].</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 124
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (_ oE hfiber_functor_sigma _ _ _ _ _ _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 125
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
    refine (equiv_functor_sigma' 1 _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 126
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>
    intros [b1 e1]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 127
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>
    refine (_ oE (equiv_transport (fun x =&gt; hfiber (functor_sigma l _) x) _ _
                                 (transport_sigma' e1^ (c2; e2)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 129
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (_ oE hfiber_functor_sigma _ _ _ _ _ _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_functor_sigma' 1 _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 131
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    intros [c1 e3]; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 132
Time: 0.006s">
<div class="time" style="width: 15%"></div>
<pre>
    refine (_ oE (equiv_transport (hfiber (fun e0 =&gt; (p b1 @ ap h e0) @ (q c1)^)) _ _
                                 (ap (fun e =&gt; e3^ # e) (transport_paths_Fl e1^ e2)))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 134
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>
    refine (_ oE (equiv_transport (hfiber (fun e0 =&gt; (p b1 @ ap h e0) @ (q c1)^)) _ _
                                 (transport_paths_Fr e3^ _))).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold functor_hfiber; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 137
Time: 0.003s">
<div class="time" style="width: 7.5%"></div>
<pre>
    refine (equiv_concat_l (transport_sigma' e2 _) _ oE _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 138
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (equiv_path_sigma _ _ _ oE _); simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 139
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (equiv_functor_sigma' 1 _); intros e0; simpl.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 140
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (equiv_concat_l (transport_paths_Fl e0 _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 141
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (equiv_concat_l (whiskerL (ap h e0)^ (transport_paths_r e2 _)) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 142
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
    refine (equiv_moveR_Vp _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 143
Time: 0.002s">
<div class="time" style="width: 5%"></div>
<pre>
    refine (equiv_concat_l (concat_pp_p _ _ _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 144
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
    refine (equiv_moveR_Vp _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 145
Time: 0.004s">
<div class="time" style="width: 10%"></div>
<pre>
    do 2 refine (equiv_concat_r (concat_pp_p _ _ _) _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 146
Time: 0.001s">
<div class="time" style="width: 2.5%"></div>
<pre>
    refine (equiv_moveL_pM _ _ _ oE _).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 147
Time: 0.023s">
<div class="time" style="width: 57.5%"></div>
<pre>
    abstract (rewrite !ap_V, inv_V; refine (equiv_path_inverse _ _)).</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 150
Time: 0.03s">
<div class="time" style="width: 75%"></div>
<pre>End Functor_Pullback.</pre>
</div>
<div class="code" title="File: Pullback.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

