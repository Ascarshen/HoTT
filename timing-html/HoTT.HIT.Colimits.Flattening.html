<html>
<head>
<title>Flattening.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Flattening.v</h1>

<div class="code" title="File: Flattening.v
Line: 1
Time: 0.041s">
<div class="time" style="width: 3.4834324553951%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 1
Time: 0.196s">
<div class="time" style="width: 16.652506372133%"></div>
<pre>
Require Import Colimits.Diagram Colimits.Colimit Colimits.Pushout.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Flattening lemma *)

(** This file provide a proof of the flattening lemma for colimits. This lemma describes the type [sig E'] when [E' : colimit D -&gt; Type] is a type family defined by recusrion on a colimit. *)
(** The flattening lemma in the case of W-types is presented in section 6.12 of the HoTT book. *)
(** A good intuition is given by the pushout's case (see above). *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Flattening.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** ** Equifibered diagrams *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context `{fs : Funext} {G : graph} (D : diagram G).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We define here the graph ∫D, also denoted G·D *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition integral : graph.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_graph _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact {i : G &amp; D i}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> exact {g : G i.1 j.1 &amp; D _f g i.2 = j.2}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** Then, a dependent diagram E over D is just a diagram over ∫D. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition dep_diagram := diagram integral.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (E : dep_diagram).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 28
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre>

  Let E_f {i j : G} (g : G i j) (x : D i) : E (i; x) -&gt; E (j; (D _f g) x)
      := @diagram1 _ E (i; x) (j; D _f g x) (g; 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 31
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Given a dependent diagram, we can recover a diagram over G by considering the Σ types. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sigma_diagram : diagram G.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_diagram _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro i.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact {x : D i &amp; E (i; x)}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
      exists (D _f g x.1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (E_f g x.1 x.2).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** A dependent diagram is said equifibered if all its fibers are equivalences. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>Definition equifibered := forall i j (g : G i j) (x : D i), IsEquiv (E_f g x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (H : equifibered) `{Univalence}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Now, given an equifibered diagram and using univalence, one can define a type family [E' : colimit D -&gt; Type] by recusrion on the colimit. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Definition E' : colimit D -&gt; Type.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply colimit_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (Build_cocone _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun i x =&gt; E (i; x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> eapply path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply H.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** ** Helper lemmas *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 61
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>Definition transport_E' {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport E' (colimp i j g x) (E_f g x y) = y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (transport_idmap_ap _ _ _ _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 64
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
    simple refine (transport2 idmap _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 65
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    2: apply colimit_rec_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (moveR_transport_V idmap _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 67
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
    symmetry; apply transport_path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 71
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>Definition transport_E'_V {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport E' (colimp i j g x)^ y = E_f g x y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 73
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
    simple refine (moveR_transport_V E' (colimp i j g x) y _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 74
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 78
Time: 0.007s">
<div class="time" style="width: 0.59473237043331%"></div>
<pre>Definition transport_E'_V_E' {i j : G} (g : G i j)  (x : D i) (y : E (i; x))
    : transport_E' g x y
      = ap (transport E' (colimp i j g x)) (transport_E'_V g x y)^
        @ transport_pV E' (colimp i j g x) y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    unfold transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 83
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
    rewrite moveR_transport_V_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 84
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
    rewrite inv_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 85
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 85
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    apply ap_transport_transport_pV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** ** Main result *)

  (** We define the cocone over the sigma diagram to [sig E']. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition cocone_E' : cocone sigma_diagram (sig E').</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_cocone _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 95
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i w.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exists (colim i w.1); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact w.2.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simple refine (path_sigma' _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** And we directly prove than it is universal. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Opaque path_sigma ap11.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition is_universal_cocone_E' : is_universal cocone_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro Z.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> serapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [q qq].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 109
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
      intros [x y]; revert x y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simple refine (colimit_ind _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i x y; exact (q i (x; y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> funext y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 113
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
        refine (transport_arrow_toconst _ _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (_ @ qq i j g (x; y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
        refine (path_sigma' _ 1 _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> apply transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0.011s">
<div class="time" style="width: 0.93457943925234%"></div>
<pre> intros [q qq].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> simple refine (path_cocone _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros i x; reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 119
Time: 0.104s">
<div class="time" style="width: 8.8360237892948%"></div>
<pre> intros i j g [x y].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 119
Time: 0.096s">
<div class="time" style="width: 8.1563296516568%"></div>
<pre>
        rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.047s">
<div class="time" style="width: 3.9932030586236%"></div>
<pre> rewrite ap_path_sigma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 120
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre>
        cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 121
Time: 0.035s">
<div class="time" style="width: 2.9736618521665%"></div>
<pre> rewrite colimit_ind_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 121
Time: 0.016s">
<div class="time" style="width: 1.3593882752761%"></div>
<pre> rewrite ap10_path_forall.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 121
Time: 0.436s">
<div class="time" style="width: 37.043330501274%"></div>
<pre>
        hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 122
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
        refine (_ @ concat_1p _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 123
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> refine (_ @@ 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 123
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
        match goal with
        | |- ap _ ?X @ _ = _ =&gt; set X
        end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        assert (transport_E'_V g x y = p^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          subst p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold transport_E'_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
          exact (moveL_transport_V_V E' _ _ _ _)^.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre>
        rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre> clearbody p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre> set (E_f g x y) in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 130
Time: 0.007s">
<div class="time" style="width: 0.59473237043331%"></div>
<pre>
        clearbody d; destruct p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> intro f.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0.011s">
<div class="time" style="width: 0.93457943925234%"></div>
<pre> funext [x y].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> revert x y; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 133
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre>
      simple refine (colimit_ind _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 136
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> intros i j g x; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 136
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> funext y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 136
Time: 0.027s">
<div class="time" style="width: 2.2939677145285%"></div>
<pre>
        rewrite transport_forall; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 137
Time: 0.017s">
<div class="time" style="width: 1.4443500424809%"></div>
<pre>
        rewrite transport_paths_FlFr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 138
Time: 0.027s">
<div class="time" style="width: 2.2939677145285%"></div>
<pre>
        match goal with
        | |- (_ @ ?pp) @ _ = _ =&gt; set pp
        end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> cbn in p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        assert (p = 1).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 142
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          subst p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 143
Time: 0.011s">
<div class="time" style="width: 0.93457943925234%"></div>
<pre>
          match goal with
          | |- transportD E' ?C _ _ _ = _ =&gt; set (C2:=C)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 146
Time: 0.008s">
<div class="time" style="width: 0.67969413763806%"></div>
<pre>
          rewrite (transportD_is_transport _ (fun w =&gt; C2 w.1 w.2)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 147
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre>
          subst C2; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.04s">
<div class="time" style="width: 3.3984706881903%"></div>
<pre> rewrite transport_paths_FlFr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.08s">
<div class="time" style="width: 6.7969413763806%"></div>
<pre>
          rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre> apply moveR_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.017s">
<div class="time" style="width: 1.4443500424809%"></div>
<pre> rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 149
Time: 0.064s">
<div class="time" style="width: 5.4375531011045%"></div>
<pre>
          rewrite ap_path_sigma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 150
Time: 0.011s">
<div class="time" style="width: 0.93457943925234%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 150
Time: 0.047s">
<div class="time" style="width: 3.9932030586236%"></div>
<pre>
          rewrite colimit_ind_beta_colimp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 151
Time: 0.041s">
<div class="time" style="width: 3.4834324553951%"></div>
<pre> rewrite ap10_path_forall.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 151
Time: 1.177s">
<div class="time" style="width: 100%"></div>
<pre>
          hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 152
Time: 0.027s">
<div class="time" style="width: 2.2939677145285%"></div>
<pre>
          rewrite ap11_is_ap10_ap01.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0.008s">
<div class="time" style="width: 0.67969413763806%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0.028s">
<div class="time" style="width: 2.3789294817332%"></div>
<pre> rewrite concat_1p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0.026s">
<div class="time" style="width: 2.2090059473237%"></div>
<pre>
          rewrite (ap_compose (fun y =&gt; (colim j ((D _f g) x); y)) f).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 154
Time: 0.007s">
<div class="time" style="width: 0.59473237043331%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 154
Time: 0.035s">
<div class="time" style="width: 2.9736618521665%"></div>
<pre>
          rewrite (ap_compose (fun x0 : exists x0 : D j, E (j; x0)
                               =&gt; (colim j (pr1 x0); pr2 x0)) f).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 156
Time: 0.063s">
<div class="time" style="width: 5.3525913338997%"></div>
<pre>
          rewrite &lt;- !ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 157
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre> apply (ap (ap f)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 157
Time: 0.023s">
<div class="time" style="width: 1.9541206457094%"></div>
<pre>
          match goal with
          | |- _ = (ap ?ff ?pp1 @ ?pp2) @ ?pp3 =&gt; set (p1 := pp1)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 160
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
          assert (p1 = ap (transport E' (colimp i j g x)^)
                          (transport_pV E' (colimp i j g x) y)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            subst p1; clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 163
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
            etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 165
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> serapply moveL_transport_V_1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 165
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 165
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
            etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> serapply inverse2.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> 2: serapply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 166
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
            symmetry; apply ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 167
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 167
Time: 0.021s">
<div class="time" style="width: 1.7841971112999%"></div>
<pre>
          rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear X p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 168
Time: 0.028s">
<div class="time" style="width: 2.3789294817332%"></div>
<pre>
          rewrite &lt;- ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 169
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 169
Time: 0.037s">
<div class="time" style="width: 3.143585386576%"></div>
<pre>
          rewrite (ap_path_sigma (fun x =&gt; E (j; x)) (fun x y =&gt; (colim j x; y))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 170
Time: 0.008s">
<div class="time" style="width: 0.67969413763806%"></div>
<pre>
          cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 171
Time: 0.057s">
<div class="time" style="width: 4.8428207306712%"></div>
<pre> rewrite !concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 171
Time: 0.014s">
<div class="time" style="width: 1.1894647408666%"></div>
<pre> rewrite concat_pp_p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 171
Time: 0.016s">
<div class="time" style="width: 1.3593882752761%"></div>
<pre>
          rewrite ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 172
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre> apply moveL_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 172
Time: 0.032s">
<div class="time" style="width: 2.7187765505523%"></div>
<pre>
          match goal with
          | |- ?pp1 @ _ = ?pp2 @ _ =&gt; set (p1 := pp1); set (p2 := pp2)
          end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 175
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre> cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 175
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
          assert (p1 = path_sigma' E' 1 (transport_Vp _ _ _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            subst p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 177
Time: 0.009s">
<div class="time" style="width: 0.76465590484282%"></div>
<pre> rewrite &lt;- ap_existT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 177
Time: 0.016s">
<div class="time" style="width: 1.3593882752761%"></div>
<pre>
            rewrite (ap_compose (transport E' (colimp i j g x)^)
                                (fun v =&gt; (colim j ((D _f g) x); v))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 179
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre>
            f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 180
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> set (colimp i j g x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> clear.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 180
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre>
            symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 181
Time: 0.01s">
<div class="time" style="width: 0.84961767204758%"></div>
<pre> apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 181
Time: 0.015s">
<div class="time" style="width: 1.2744265080714%"></div>
<pre>
          rewrite X; clear p1 X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 182
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre>
          assert (p2 = path_sigma' E' 1 (transport_E'_V _ _ _))
            by reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 184
Time: 0.019s">
<div class="time" style="width: 1.6142735768904%"></div>
<pre>
          rewrite X; clear p2 X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 185
Time: 0.086s">
<div class="time" style="width: 7.3067119796092%"></div>
<pre>
          rewrite &lt;- !path_sigma_pp_pp'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 186
Time: 0.01s">
<div class="time" style="width: 0.84961767204758%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 186
Time: 0.026s">
<div class="time" style="width: 2.2090059473237%"></div>
<pre>
          rewrite concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.026s">
<div class="time" style="width: 2.2090059473237%"></div>
<pre> rewrite concat_pp_p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
          refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 188
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
          apply moveL_Mp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 189
Time: 0.025s">
<div class="time" style="width: 2.1240441801189%"></div>
<pre> rewrite &lt;- ap_V.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 189
Time: 0.012s">
<div class="time" style="width: 1.0195412064571%"></div>
<pre> rewrite &lt;- ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 189
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
          simple refine (_ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 191
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> refine (ap (transport E' (colimp i j g x)) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 191
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
            refine ((transport_E'_V _ _ _)^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 192
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
            refine (ap _ (transport_pV _ _ _)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.007s">
<div class="time" style="width: 0.59473237043331%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre> refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 194
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
            apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 196
Time: 0.015s">
<div class="time" style="width: 1.2744265080714%"></div>
<pre> set (transport E' (colimp i j g x) (transport E' (colimp i j g x)^ y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 196
Time: 0.006s">
<div class="time" style="width: 0.50977060322855%"></div>
<pre>
            rewrite ap_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 197
Time: 0.009s">
<div class="time" style="width: 0.76465590484282%"></div>
<pre> rewrite &lt;- ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 197
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre>
            refine (_ @ (transport_E'_V_E' _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 198
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
            refine (1 @@ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> subst e.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 199
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre>
            refine (_ @ (transport_pVp _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 200
Time: 0.01s">
<div class="time" style="width: 0.84961767204758%"></div>
<pre>
            rewrite ap_compose.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 201
Time: 0.005s">
<div class="time" style="width: 0.42480883602379%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 201
Time: 0.004s">
<div class="time" style="width: 0.33984706881903%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 201
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
            apply transport_VpV.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 202
Time: 0.33s">
<div class="time" style="width: 28.03738317757%"></div>
<pre>
        rewrite X; hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

  (** The flattening lemma follows by colimit unicity. *)

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition flattening_lemma : colimit sigma_diagram &lt;~&gt; sig E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 209
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    serapply colimit_unicity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    3: apply is_colimit_colimit.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    serapply Build_is_colimit.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    2: apply is_universal_cocone_E'.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 214
Time: 0.815s">
<div class="time" style="width: 69.243840271878%"></div>
<pre>End Flattening.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** * Pushout case *)

(** We instanciate the flattening lemma in the case of the pushout. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section POCase.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Univalence} {A B C} {f: A -&gt; B} {g: A -&gt; C}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (A0 : A -&gt; Type) (B0 : B -&gt; Type) (C0 : C -&gt; Type)
          (f0 : forall x, A0 x &lt;~&gt; B0 (f x)) (g0 : forall x, A0 x &lt;~&gt; C0 (g x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition POCase_P : PO f g -&gt; Type.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 226
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (PO_rec Type B0 C0 _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    cbn; intro x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> eapply path_universe_uncurried.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 229
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    etransitivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> symmetry.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply f0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply g0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition POCase_E : dep_diagram (span f g).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (Build_diagram _ _ _); cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 238
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> intros [[] x]; revert x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> 
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact A0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> destruct b; assumption.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 241
Time: 0.067s">
<div class="time" style="width: 5.6924384027188%"></div>
<pre> intros [[[]|[]] x] [[[]|[]] y]; cbn; intros [[] p].</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun y =&gt; p # (f0 x y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun y =&gt; p # (g0 x y)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition POCase_HE : equifibered _ POCase_E.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 247
Time: 0.077s">
<div class="time" style="width: 6.5420560747664%"></div>
<pre>
    intros [[]|[]] [[]|[]] [] x; compute.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (equiv_isequiv (f0 x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (equiv_isequiv (g0 x)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 253
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>Definition PO_flattening
    : PO (functor_sigma f f0) (functor_sigma g g0) &lt;~&gt; exists x, POCase_P x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 255
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    assert (PO (functor_sigma f f0) (functor_sigma g g0)
            = colimit (sigma_diagram (span f g) POCase_E)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 257
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold PO; apply ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 258
Time: 0.018s">
<div class="time" style="width: 1.5293118096856%"></div>
<pre>
      serapply path_diagram; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 260
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> intros [|[]]; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 261
Time: 0.144s">
<div class="time" style="width: 12.234494477485%"></div>
<pre> intros [[]|[]] [[]|[]] [] x; cbn in *.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 262
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
    rewrite X; clear X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 263
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
    transitivity (exists x, E' (span f g) POCase_E POCase_HE x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 265
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre> apply flattening_lemma.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply equiv_functor_sigma_id.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intro x.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 267
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
      assert (E' (span f g) POCase_E POCase_HE x = POCase_P x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 268
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> {</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 268
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
        unfold E', POCase_P, PO_rec.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 269
Time: 0.009s">
<div class="time" style="width: 0.76465590484282%"></div>
<pre>
        f_ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 270
Time: 0.003s">
<div class="time" style="width: 0.25488530161427%"></div>
<pre> serapply path_cocone.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 271
Time: 0.014s">
<div class="time" style="width: 1.1894647408666%"></div>
<pre> intros [[]|[]] y; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          1: apply path_universe_uncurried; apply g0.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          all: reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        -</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 274
Time: 0.668s">
<div class="time" style="width: 56.754460492778%"></div>
<pre> intros [[]|[]] [[]|[]] []; cbn.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 275
Time: 0.149s">
<div class="time" style="width: 12.659303313509%"></div>
<pre> intro y; simpl; hott_simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            unfold path_universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 276
Time: 0.002s">
<div class="time" style="width: 0.16992353440952%"></div>
<pre>
            rewrite &lt;- path_universe_V_uncurried.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 277
Time: 0.001s">
<div class="time" style="width: 0.084961767204758%"></div>
<pre>
            refine (path_universe_compose (f0 y)^-1 (g0 y))^.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 278
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> 
          +</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros; apply concat_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 279
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      rewrite X.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 282
Time: 0.302s">
<div class="time" style="width: 25.658453695837%"></div>
<pre>End POCase.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 283
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

