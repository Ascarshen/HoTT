<html>
<head>
<title>BlakersMassey.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for BlakersMassey.v</h1>

<div class="code" title="File: BlakersMassey.v
Line: 1
Time: 0.017s">
<div class="time" style="width: 0.2817835239516%"></div>
<pre>Require Import Basics.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 1
Time: 0.017s">
<div class="time" style="width: 0.2817835239516%"></div>
<pre>
Require Import Types.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 2
Time: 0.008s">
<div class="time" style="width: 0.13260401127134%"></div>
<pre>
Require Import Colimits.Pushout.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Colimits.SpanPushout.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 4
Time: 0.162s">
<div class="time" style="width: 2.6852312282447%"></div>
<pre>
Require Import Homotopy.Join.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import Modalities.ReflectiveSubuniverse.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 6
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
Require Import Truncations.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import NullHomotopy Extensions.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * The Generalized Blakers-Massey Theorem *)

(** ** Path algebra helper lemma *)

(** Here are is a strange-looking path algebra helper lemma that is easier to prove by lifting to a general case and doing a path-induction blast.  It says something about what happens when we transport from the center of a based path-space to some other point, assuming we know a particular way to "compute" the action of the type family in question. *)

</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 15
Time: 0.024s">
<div class="time" style="width: 0.39781203381402%"></div>
<pre>Definition transport_singleton `{Univalence}
           {A : Type} {x : A} (B : forall (y : A), (x = y) -&gt; Type)
           {y : A} (p : x = y) (u : B x idpath)
           (f : forall (q:x=x), B x q &lt;~&gt; B y (q @ p))
           (ev : ap10 (apD B p) p =
   transport_arrow_toconst p (B x) p @
   path_universe_uncurried
     (equiv_transport (B y) ((p @ p^) @ p) p (concat_pV_p p p)
      oE (f (p @ p^))
      oE equiv_transport (B x)
           (transport (fun y =&gt; x = y) p^ p)
           (p @ p^) (transport_paths_r p^ p)))
  : transport (fun yp:{y:A &amp; x=y} =&gt; B yp.1 yp.2)
              (path_contr (A := {y:A &amp; x=y}) (x;idpath) (y;p)) u
    = transport (B y) (concat_1p _) (f idpath u).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 30
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
  destruct p; cbn in *.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 31
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
  apply (fun e =&gt; e @ concat_1p _) in ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 32
Time: 0.104s">
<div class="time" style="width: 1.7238521465274%"></div>
<pre>
  apply moveR_equiv_V in ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply (ap equiv_fun) in ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 34
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply ap10 in ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  specialize (ev u).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  cbn in ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact ev.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 38
Time: 0.01s">
<div class="time" style="width: 0.16575501408918%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Setup *)

</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module GenBlakersMassey (Os : ReflectiveSubuniverses).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Import Os.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 43
Time: 0.056s">
<div class="time" style="width: 0.92822807889939%"></div>
<pre>
  Module Import Os_Theory := ReflectiveSubuniverses_Theory Os.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Section GBM.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context {X Y : Type} (Q : X -&gt; Y -&gt; Type).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** Here's the hypothesis of ABFJ generalized Blakers-Massey.  It works for any reflective subuniverse, not only modalities! *)
   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context (O : ReflectiveSubuniverse).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 50
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
    Context
      (isconnected_cogap :
         forall (x1 x3 : X) (y2 y4 : Y)
                (q12 : Q x1 y2) (q32 : Q x3 y2) (q34 : Q x3 y4),
           IsConnected O (Join ((x1;q12) = (x3;q32) :&gt; {x:X &amp; Q x y2})
                               ((y2;q32) = (y4;q34) :&gt; {y:Y &amp; Q x3 y}))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    Let P := SPushout Q.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Local Notation left := (spushl Q).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Local Notation right := (spushr Q).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Local Notation glue := (spglue Q).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** Here's a lemma that's a sort of "singleton contractibility" equivalence, but expressed in a particularly strange way.  As we'll see, this form of the lemma comes up naturally *twice* in the proof, and proving it once here to use in both places is crucial so that the two uses can be identified later on. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 65
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>Local Definition frobnicate {x0 x1 : X} (r : left x0 = left x1)
          (s : x0 = x1) (y : Y) (q1 : Q x1 y)
      : {q0 : Q x0 y &amp;
              {w : transport (fun x =&gt; Q x y) s q0 = q1 &amp;
                   glue q0 @ (glue q1)^ = r } }
          &lt;~&gt; ap left s = r.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 71
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
      refine (_ oE (equiv_sigma_assoc
                      (fun q0 =&gt; transport _ s q0 = q1)
                      (fun qt =&gt; glue qt.1 @ (glue q1)^ = r))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 74
Time: 0.005s">
<div class="time" style="width: 0.082877507044588%"></div>
<pre>
      refine (_ oE equiv_functor_sigma'
                (Q := fun qt =&gt; glue qt.1 @ (glue q1)^ = r)
                (equiv_functor_sigma'
                   (Q := fun q0 =&gt; q0 = transport _ s^ q1)
                   equiv_idmap
                   (fun q0 : Q x0 y =&gt;
                      equiv_moveL_transport_V
                        (fun x =&gt; Q x y) s q0 q1))
                (fun qt =&gt; equiv_idmap)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 83
Time: 0.021s">
<div class="time" style="width: 0.34808552958727%"></div>
<pre>
      refine (_ oE equiv_contr_sigma _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 84
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
      rewrite (ap_transport s^ (fun x q =&gt; glue q) q1).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 85
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
      rewrite (transport_paths_FlFr s^ (glue q1)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 86
Time: 0.007s">
<div class="time" style="width: 0.11602850986242%"></div>
<pre>
      rewrite ap_V, inv_V, ap_const, concat_p1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (equiv_concat_l (concat_pp_V _ _)^ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (** Although we proved this lemma with [rewrite], we make it transparent, not so that *we* can reason about it, but so that Coq can evaluate it. *)
   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 90
Time: 0.01s">
<div class="time" style="width: 0.16575501408918%"></div>
<pre>Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** ** Codes *)

    (** *** Right-hand codes *)

    (** The right-hand codes family is easy. *)
   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 97
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>Definition coderight {x0 : X} {y : Y} (r : left x0 = right y) : Type
      := O (hfiber glue r).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** *** Left-hand codes *)

    (** We enhance the HFLL and ABFJ theorems by defining a version of code-left that doesn't depend on one map being surjective. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section CodeLeft.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      Context {x0 x1 : X} (r : left x0 = left x1).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

      (** The left codes are themselves a pushout, of what is morally also a dependent span, but we formulate it as an ordinary pushout of projections between iterated Sigma-types.  The span is [codeleft1] &lt;- [codeleft0] -&gt; [codeleft2]. *)

     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 109
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>Definition codeleft1 : Type
        := { s : x0 = x1 &amp;
          (* v : *) ap left s = r}.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 111
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

      Definition codeleft2 : Type
        := { y0  : Y &amp;
           { q00 : Q x0 y0 &amp;
           { q10 : Q x1 y0 &amp;
          (* u   : *) glue q00 @ (glue q10)^ = r } } }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 117
Time: 0.007s">
<div class="time" style="width: 0.11602850986242%"></div>
<pre>

      Definition codeleft0 : Type
        := { s   : x0 = x1 &amp;
           { y0  : Y &amp;
           { v   : ap left s = r &amp;
           { q00 : Q x0 y0 &amp;
           { q10 : Q x1 y0 &amp;
           { w   : transport (fun x =&gt; Q x y0) s q00 = q10 &amp;
           { u   : glue q00 @ (glue q10)^ = r &amp;
                   (** Note the first use of frobnicate here. *)
                   frobnicate r s y0 q10 (q00;w;u) = v
           } } } } } } }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

      Definition codeleft01 : codeleft0 -&gt; codeleft1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 132
Time: 0.02s">
<div class="time" style="width: 0.33151002817835%"></div>
<pre>
        intros [s [y0 [v [q00 [q10 [w [u d]]]]]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 133
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        exact (s;v).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 134
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>
      Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

      Definition codeleft02 : codeleft0 -&gt; codeleft2.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 138
Time: 0.033s">
<div class="time" style="width: 0.54699154649428%"></div>
<pre>
        intros [s [y0 [v [q00 [q10 [w [u d]]]]]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        exact (y0;q00;q10;u).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 140
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>
      Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

      Definition codeleft : Type
        := O (Pushout codeleft01 codeleft02).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 144
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

      (** *** Codes for glue *)

     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section CodeGlue.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Context {y1 : Y} (q11 : Q x1 y1).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** We prove that codes respect glue as a chain of equivalences between types built from pushouts and double-pushouts.  The first step is to add the data of our hypothesized-to-be-connected type inside [codeleft2]. *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 153
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>Definition codeleft2plus :=
          {yqqu : codeleft2 &amp;
                  Join ((x0; yqqu.2.1) = (x1; yqqu.2.2.1)
                                           :&gt; {x:X &amp; Q x yqqu.1})
                       ((yqqu.1; yqqu.2.2.1) = (y1; q11)
                                           :&gt; {y:Y &amp; Q x1 y})}.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** Since this connected type is itself a join, hence a pushout, the second step is to distribute this and reexpress the whole thing as another pushout of iterated Sigma-types. *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 162
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>Definition Ocodeleft2b
        := { s   : x0 = x1 &amp;
           { y0  : Y &amp;
           { q00 : Q x0 y0 &amp;
           { q10 : Q x1 y0 &amp;
           { w   : transport (fun x =&gt; Q x y0) s q00 = q10 &amp;
           (* u:*) glue q00 @ (glue q10)^ = r
           } } } } }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 169
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

        Definition Ocodeleft2c
          := { q01 : Q x0 y1 &amp;
            (* u: *) glue q01 @ (glue q11)^ = r }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 173
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>

        Definition Ocodeleft2a
        := { s   : x0 = x1 &amp;
           { q01 : Q x0 y1 &amp;
           { w   : transport (fun x =&gt; Q x y1) s q01 = q11 &amp;
           (* u:*) glue q01 @ (glue q11)^ = r
           } } }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        Definition Ocodeleft2ab : Ocodeleft2a -&gt; Ocodeleft2b.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 183
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
          intros [s [q01 [w u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 184
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          exact (s;y1;q01;q11;w;u).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 185
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        Definition Ocodeleft2ac : Ocodeleft2a -&gt; Ocodeleft2c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 189
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
          intros [s [q01 [w u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          exact (q01;u).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 191
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** This proof is long, but most of it is just rearranging Sigma-types and paths in Sigma-types. *)
       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_Ocodeleft2plus
          : Pushout Ocodeleft2ab Ocodeleft2ac &lt;~&gt; codeleft2plus.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 197
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine ((equiv_sigma_pushout _ _ _ _ _)^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          srefine (equiv_pushout _ _ _ _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold Ocodeleft2a.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            srefine ((equiv_functor_sigma' equiv_idmap _) oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 202
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre> intros [y0 [q00 [q10 u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 202
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              exact { s  : x0 = x1 &amp;
                    { sq : transport (fun x =&gt; Q x y0) s q00 = q10 &amp;
                    { t  : y0 = y1 &amp;
                           transport (Q x1) t q10 = q11 } } }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 207
Time: 0.019s">
<div class="time" style="width: 0.31493452676943%"></div>
<pre> intros [y0 [q00 [q10 u]]]; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_functor_prod' _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              *</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              *</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply equiv_path_sigma.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              *</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (equiv_sigma_prod0 _ _ oE _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                refine (equiv_sigma_assoc _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 213
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_sigma_symm _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _); intros s.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 215
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 216
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              *</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros y0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 218
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                {</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 220
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros ?.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 220
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                  refine (equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 221
Time: 0.004s">
<div class="time" style="width: 0.06630200563567%"></div>
<pre>
                refine (equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              *</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 223
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 223
Time: 0.01s">
<div class="time" style="width: 0.16575501408918%"></div>
<pre>
                refine ((equiv_sigma_assoc (fun y =&gt; y = y1) (fun yt =&gt;
                         {b : {q00 : Q x0 yt.1 &amp;
                              {q10 : Q x1 yt.1 &amp; glue q00 @ (glue q10)^ = r} } &amp;
                         {_ : transport (fun x =&gt; Q x yt.1) s b.1 = b.2.1 &amp;
                              transport (Q x1) yt.2 (b.2).1 = q11}}))^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 228
Time: 0.02s">
<div class="time" style="width: 0.33151002817835%"></div>
<pre>
                refine ((equiv_contr_sigma _)^-1 oE _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 229
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 230
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _); intros q01; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 231
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                {</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros ?; apply (equiv_sigma_symm0 _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 233
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 234
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                {</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 236
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre> intros q; cbn; apply equiv_sigma_symm.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 236
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 237
Time: 0.005s">
<div class="time" style="width: 0.082877507044588%"></div>
<pre>
                refine ((equiv_sigma_assoc (fun q =&gt; q = q11) (fun qt =&gt;
                   {_ : glue q01 @ (glue qt.1)^ = r &amp;
                        transport (fun x =&gt; Q x y1) s q01 = qt.1}))^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 240
Time: 0.021s">
<div class="time" style="width: 0.34808552958727%"></div>
<pre>
                refine ((equiv_contr_sigma _)^-1 oE _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                apply equiv_sigma_symm0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold Ocodeleft2b.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            srefine ((equiv_functor_sigma' equiv_idmap _) oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 245
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre> intros [y0 [q00 [q10 u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              exact { s  : x0 = x1 &amp;
                    (* sq : *) transport (fun x =&gt; Q x y0) s q00 = q10 }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 248
Time: 0.015s">
<div class="time" style="width: 0.24863252113376%"></div>
<pre> intros [y0 [q00 [q10 u]]]; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 248
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_path_sigma _ (x0;q00) (x1;q10)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_sigma_symm _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _); intros s.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 252
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _); intros y0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 254
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 255
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _); intros q00.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 256
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 257
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _); intros q10.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              apply equiv_sigma_symm0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold Ocodeleft2c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            srefine ((equiv_functor_sigma' equiv_idmap _) oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 262
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre> intros [y0 [q00 [q10 u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              exact { t  : y0 = y1 &amp;
                           transport (Q x1) t q10 = q11 }.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 265
Time: 0.019s">
<div class="time" style="width: 0.31493452676943%"></div>
<pre> intros [y0 [q00 [q10 u]]]; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 265
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_path_sigma _ (y0;q10) (y1;q11)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 266
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            +</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 267
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 268
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
              {</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 270
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre> intros y0; apply equiv_sigma_symm.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 270
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
              cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 271
Time: 0.007s">
<div class="time" style="width: 0.11602850986242%"></div>
<pre>
              refine ((equiv_sigma_assoc (fun y =&gt; y = y1) (fun yt =&gt;
                        {b : {q00 : Q x0 yt.1 &amp;
                             {q10 : Q x1 yt.1 &amp;
                             glue q00 @ (glue q10)^ = r}}
                             &amp; transport (Q x1) yt.2 (b.2).1 = q11}))^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 276
Time: 0.02s">
<div class="time" style="width: 0.33151002817835%"></div>
<pre>
                refine ((equiv_contr_sigma _)^-1 oE _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 277
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 278
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _); intros q01; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 279
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_sigma_assoc _ _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 280
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
                refine (equiv_functor_sigma' equiv_idmap _ oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 281
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                {</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 282
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre> intros q; cbn; apply equiv_sigma_symm0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 283
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
                refine ((equiv_sigma_assoc (fun q =&gt; q = q11)
                          (fun qt =&gt; glue q01 @ (glue qt.1)^ = r))^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 285
Time: 0.023s">
<div class="time" style="width: 0.38123653240511%"></div>
<pre>
                refine ((equiv_contr_sigma _)^-1 oE _); cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 286
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
                apply equiv_idmap.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 288
Time: 0.577s">
<div class="time" style="width: 9.5640643129455%"></div>
<pre> intros [s [q01 [w u]]]; reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 289
Time: 0.684s">
<div class="time" style="width: 11.3376429637%"></div>
<pre> intros [s [q01 [w u]]]; reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 289
Time: 0.505s">
<div class="time" style="width: 8.3706282115034%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** Now we combine this equivalence with the insertion of our connected type. *)
       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition equiv_Ocodeleft2
          : O (Pushout Ocodeleft2ab Ocodeleft2ac) &lt;~&gt; O codeleft2.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 295
Time: 0.023s">
<div class="time" style="width: 0.38123653240511%"></div>
<pre>
          refine ((equiv_O_functor O (equiv_sigma_contr
                  (fun yqqu : codeleft2 =&gt;
                     O (Join ((x0; yqqu.2.1) = (x1; yqqu.2.2.1))
                             ((yqqu.1 ; yqqu.2.2.1) = (y1; q11)))))) oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          refine ((equiv_O_sigma_O O _)^-1 oE _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 300
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          apply equiv_O_functor.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 301
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          apply equiv_Ocodeleft2plus.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 302
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 303
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** The next step is to reassociate the resulting double-pushout and "contract" both of them, one after the other, because they are pushouts along equivalences.  In order to do this, we need first of all to know that the resulting map from [codeleft0] to the above pushout factors through [Ocodeleft2b] via an equivalence.  Here's the equivalence: *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Ocodeleft02b : codeleft0 &lt;~&gt; Ocodeleft2b.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 308
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          unfold codeleft0, Ocodeleft2b.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros s.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros y0.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 311
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (_ oE equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 312
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros q00.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 313
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (_ oE equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 314
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros q10.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 315
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (_ oE equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 316
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros w.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 317
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (_ oE equiv_sigma_symm _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 318
Time: 0.498s">
<div class="time" style="width: 8.254599701641%"></div>
<pre>
          refine (equiv_sigma_contr _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 319
Time: 0.034s">
<div class="time" style="width: 0.5635670479032%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 320
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

        Definition Ocodeleft02 (c : codeleft0)
          : Pushout Ocodeleft2ab Ocodeleft2ac
          := pushl' Ocodeleft2ab Ocodeleft2ac (Ocodeleft02b c).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 324
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

        Definition Ocodeleft02plus_02b (c : codeleft0)
          : (equiv_Ocodeleft2plus (Ocodeleft02 c)).1 = codeleft02 c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 328
Time: 0.15s">
<div class="time" style="width: 2.4863252113376%"></div>
<pre>
          destruct c as [s [y0 [v [q00 [q10 [w [u d]]]]]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 329
Time: 0.013s">
<div class="time" style="width: 0.21548151831593%"></div>
<pre>
          reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 330
Time: 0.032s">
<div class="time" style="width: 0.53041604508536%"></div>
<pre>
        Qed.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** And here we show that this equivalence is indeed a factor of the relevant map in the original pushout. *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 335
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>Definition Ocodeleft02_02b (c : codeleft0)
          : equiv_Ocodeleft2 (to O _ (Ocodeleft02 c)) = to O _ (codeleft02 c).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 337
Time: 0.15s">
<div class="time" style="width: 2.4863252113376%"></div>
<pre>
          destruct c as [s [y0 [v [q00 [q10 [w [u d]]]]]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 338
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          unfold equiv_Ocodeleft2.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 339
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          Opaque equiv_Ocodeleft2plus.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 340
Time: 1.089s">
<div class="time" style="width: 18.050721034311%"></div>
<pre>
          cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 341
Time: 2.831s">
<div class="time" style="width: 46.925244488646%"></div>
<pre>
          rewrite to_O_natural, O_rec_beta, to_O_natural.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 342
Time: 0.663s">
<div class="time" style="width: 10.989557434112%"></div>
<pre>
          apply ap; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 343
Time: 0.032s">
<div class="time" style="width: 0.53041604508536%"></div>
<pre>
          apply Ocodeleft02plus_02b.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre></pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 344
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          cbn.
          rewrite to_O_natural, O_rec_beta, to_O_natural.
          apply ap; cbn.
          apply Ocodeleft02plus_02b.
       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 349
Time: 6.033s">
<div class="time" style="width: 100%"></div>
<pre>Qed.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 349
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** Thus, our pushout in which one vertex is itself a pushout can be written as a "double pushout"

[codeleft1] &lt;- [codeleft0] -&gt; [codeleft2b] &lt;- [codeleft2a] -&gt; [codeleft2c].

Since the map [codeleft0] -&gt; [codeleft2b] is an equivalence, the pushout of the left-hand span is equivalent to [codeleft1], and thus the whole thing is equivalent to a pushout

[codeleft1] &lt;- [codeleft2a] -&gt; [codeleft2c]

Now we claim that the left-hand map of this span is also an equivalence.  Rather than showing this directly, it seems to be much easier to first construct *an* equivalence from [codeleft2a] to [codeleft1] and then show that it is equal (as a function) to the induced one.  Here's the equivalence: *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition Ocodeleft2a1 : Ocodeleft2a &lt;~&gt; codeleft1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 362
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          unfold Ocodeleft2a, codeleft1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 363
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros s; cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          (** Here's frobnicate showing up again! *)
         </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 366
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>apply frobnicate.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 366
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 367
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** And now we check that the two are equal.  Because we used the same proof of [frobnicate] in two places, this equality becomes definitional after simply decomposing up a Sigma-type! *)
       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 370
Time: 0.024s">
<div class="time" style="width: 0.39781203381402%"></div>
<pre>Definition Ocodeleft2a1_through_2b0
          : Ocodeleft2a1 == codeleft01 o Ocodeleft02b^-1 o Ocodeleft2ab.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 371
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 372
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>
          intros [s [q01 [w u]]].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 373
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
          reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 374
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 375
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

        (** Now we're finally ready to prove the glue equivalence.  Since later on we'll have to compute its action on inputs from [codeleft1], we decompose it into seven steps, each of which with a corresponding computation lemma.  (These lemmas seem to be much easier to prove step-by-step than all at once if we proved the whole equivalence in a big shebang.) *)

       </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 379
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>Definition codeglue1
          : codeleft &lt;~&gt; O (Pushout (O_functor O codeleft01)
                                    (O_functor O codeleft02))
        := equiv_O_pushout O _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 382
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>

        Definition codeglue1_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue1 (to O _ (pushl (s;v))) =
            to O _ (pushl (to O _ (s; v)))
          := equiv_O_pushout_to_O_pushl _ _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 387
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>

        Definition codeglue2
          : O (Pushout (O_functor O codeleft01) (O_functor O codeleft02))
        &lt;~&gt; O (Pushout (O_functor O codeleft01) (O_functor O Ocodeleft02)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 391
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 392
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
          srefine (equiv_O_functor O
                    (equiv_inverse
                    (equiv_pushout (f := O_functor O codeleft01)
                                   (g := O_functor O Ocodeleft02)
                                   1%equiv 1%equiv equiv_Ocodeleft2 _ _))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 399
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre> apply O_indpaths; intros x.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 399
Time: 0.007s">
<div class="time" style="width: 0.11602850986242%"></div>
<pre>
            abstract (rewrite !to_O_natural; apply Ocodeleft02_02b).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 400
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 401
Time: 0.014s">
<div class="time" style="width: 0.23205701972485%"></div>
<pre>

        Definition codeglue2_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue2 (to O _ (pushl (to O _ (s;v))))
            = to O _ (pushl (to O _ (s;v)))
          := to_O_equiv_natural _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 406
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>

        Definition codeglue3
          : O (Pushout (O_functor O codeleft01) (O_functor O Ocodeleft02))
              &lt;~&gt; O (Pushout codeleft01 Ocodeleft02)
          := equiv_inverse (equiv_O_pushout O _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 411
Time: 0.007s">
<div class="time" style="width: 0.11602850986242%"></div>
<pre>

        Definition codeglue3_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue3 (to O _ (pushl (to O _ (s;v))))
            = to O _ (pushl (s;v))
          := inverse_equiv_O_pushout_to_O_pushl _ _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 416
Time: 0.004s">
<div class="time" style="width: 0.06630200563567%"></div>
<pre>

        Definition codeglue4
          : O (Pushout codeleft01 Ocodeleft02)
            &lt;~&gt; O (Pushout
                     (fun x : Ocodeleft2a =&gt;
                        pushr' codeleft01 Ocodeleft02b (Ocodeleft2ab x))
                     Ocodeleft2ac)
          := equiv_O_functor O (equiv_inverse (equiv_pushout_assoc _ _ _ _)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 424
Time: 0.009s">
<div class="time" style="width: 0.14917951268026%"></div>
<pre>

        Definition codeglue4_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue4 (to O _ (pushl (s;v)))
            = to O _ (pushl (pushl (s;v)))
          := to_O_equiv_natural _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 429
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

        Definition codeglue5
          : O (Pushout
                 (fun x : Ocodeleft2a =&gt;
                    pushr' codeleft01 Ocodeleft02b (Ocodeleft2ab x))
                 Ocodeleft2ac)
        &lt;~&gt; O (Pushout Ocodeleft2a1 Ocodeleft2ac).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 436
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 437
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
          srefine (equiv_O_functor O
                     (equiv_inverse
                        (equiv_pushout (f := Ocodeleft2a1) (g := Ocodeleft2ac)
                                       1%equiv _ 1%equiv _ _))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 441
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 442
Time: 0.05s">
<div class="time" style="width: 0.82877507044588%"></div>
<pre> exact (Build_Equiv _ _ (pushl' codeleft01 Ocodeleft02b) _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 442
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 443
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 443
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            refine (ap _ (Ocodeleft2a1_through_2b0 x) @ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 444
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            refine (pglue' codeleft01 Ocodeleft02b _ @ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 445
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
            apply ap, eisretr.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 446
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          -</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 447
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x; reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 447
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 448
Time: 0.014s">
<div class="time" style="width: 0.23205701972485%"></div>
<pre>

        Definition codeglue5_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue5 (to O _ (pushl (pushl (s;v))))
            = to O _ (pushl (s;v))
        := to_O_equiv_natural _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 453
Time: 0.044s">
<div class="time" style="width: 0.72932206199238%"></div>
<pre>

        Definition codeglue6
          : O (Pushout Ocodeleft2a1 Ocodeleft2ac) &lt;~&gt; O Ocodeleft2c
          := equiv_O_functor
               O (equiv_inverse
                    (Build_Equiv _ _ (pushr' Ocodeleft2a1 Ocodeleft2ac) _)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 459
Time: 0.154s">
<div class="time" style="width: 2.5526272169733%"></div>
<pre>

        Definition codeglue6_pushl (s : x0 = x1) (v : ap left s = r)
          : codeglue6 (to O _ (pushl (s;v)))
            = to O Ocodeleft2c (Ocodeleft2ac (s ; (frobnicate r s y1 q11)^-1 v))
          := to_O_equiv_natural _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 464
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

        Definition codeglue7
          : O Ocodeleft2c &lt;~&gt; coderight (r @ glue q11).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 467
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 468
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          unfold coderight, Ocodeleft2c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 469
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          apply equiv_O_functor.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          refine (equiv_functor_sigma' equiv_idmap _); intros q01.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 471
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
          apply equiv_moveL_pM.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 472
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
        Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 473
Time: 0.013s">
<div class="time" style="width: 0.21548151831593%"></div>
<pre>

        Definition codeglue7_to_O
                   (q01 : Q x0 y1) (u : glue q01 @ (glue q11)^ = r)
          : codeglue7 (to O _ (q01;u))
            = to O (hfiber glue (r @ glue q11))
                 (q01 ; moveL_pM (glue q11) (glue q01) r u)
          := to_O_equiv_natural _ _ _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 480
Time: 0.006s">
<div class="time" style="width: 0.099453008453506%"></div>
<pre>

        Definition codeglue
          : codeleft &lt;~&gt; coderight (r @ glue q11)
          := codeglue7 oE
             codeglue6 oE
             codeglue5 oE
             codeglue4 oE
             codeglue3 oE
             codeglue2 oE
             codeglue1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 490
Time: 0.049s">
<div class="time" style="width: 0.81219956903696%"></div>
<pre>

      End CodeGlue.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 492
Time: 0.086s">
<div class="time" style="width: 1.4254931211669%"></div>
<pre>

    End CodeLeft.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 494
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** *** Completion of codes *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 498
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context `{Univalence}.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 498
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Context (x0 : X).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 499
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** The equivalence [codeglue] requires a bit of massaging to put it into the form needed by the actual definition of [code] from pushout-induction and univalence. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 503
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>Definition ap_code_glue (x1 : X) (y1 : Y) (q11 : Q x1 y1)
      : transport (fun p : SPushout Q =&gt; left x0 = p -&gt; Type)
                  (glue q11) codeleft
        = coderight.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 506
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 507
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
      apply path_arrow; intros z.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 508
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine ((transport_arrow_toconst _ _ _) @ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 509
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply path_universe_uncurried.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 510
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
      refine (_ oE equiv_transport codeleft _ _ (transport_paths_r _ _)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 511
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
      refine (_ oE codeglue _ q11).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 512
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (equiv_transport coderight _ _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 513
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine (concat_pV_p z (glue q11)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 514
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 515
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** Here's the final definition of [code]. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 519
Time: 0.004s">
<div class="time" style="width: 0.06630200563567%"></div>
<pre>Definition code (p : P) (r : left x0 = p) : Type
        := SPushout_ind Q (fun p =&gt; left x0 = p -&gt; Type)
                        (@codeleft x0) (@coderight x0)
                        ap_code_glue p r.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 522
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** When we compute with [code], we'll need to extract from it the actual behavior of the function [codeglue].  Here's the mess of path algebra that we "naturally" get out when we try to do that; later we'll see how to deal with it. *)
   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 525
Time: 0.021s">
<div class="time" style="width: 0.34808552958727%"></div>
<pre>Definition code_beta_glue (x1 : X) (y1 : Y) (q11 : Q x1 y1)
               (r : left x0 = right y1)
      : ap10 (apD code (glue q11)) r
        = transport_arrow_toconst (glue q11) codeleft r
        @ path_universe_uncurried
           (equiv_transport coderight ((r @ (glue q11)^) @ glue q11) r
                            (concat_pV_p r (glue q11))
            oE (codeglue (r @ (glue q11)^) q11)
            oE equiv_transport codeleft
                 (transport (fun y : SPushout Q =&gt; left x0 = y) (glue q11)^ r)
                 (r @ (glue q11)^) (transport_paths_r (glue q11)^ r)).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 535
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 536
Time: 0.026s">
<div class="time" style="width: 0.43096303663186%"></div>
<pre>
      refine (ap (fun h =&gt; ap10 h r)
             (spushout_ind_beta_sglue Q (fun p =&gt; left x0 = p -&gt; Type)
                                  (@codeleft x0) (@coderight x0)
                                  ap_code_glue
                                  x1 y1 q11) @ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 541
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
      refine (ap10_path_arrow _ _ _ _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 542
Time: 0.017s">
<div class="time" style="width: 0.2817835239516%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 543
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** ** Contractibility of codes *)

    (** To construct a center for every type of codes, we construct one in an easy case and transport it around. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 549
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>Definition center_code1 : code (left x0) 1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 549
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 550
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      change (codeleft (idpath (left x0))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 551
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold codeleft.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 552
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply to, pushl.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 553
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold codeleft1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 554
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (idpath; idpath).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 555
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 556
Time: 0.026s">
<div class="time" style="width: 0.43096303663186%"></div>
<pre>

    Definition center_code (p : P) (r : left x0 = p) : code p r
      := transport (fun (pr : {p : P &amp; left x0 = p}) =&gt; code pr.1 pr.2)
                   (path_contr (A := {p : P &amp; left x0 = p})
                               (left x0; idpath) (p;r))
                   center_code1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 562
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** As in HFLL, we first construct a contraction in the "partially general" case of an arbitrary path from left to right. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 566
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>Definition contraction_code_right (y1 : Y) (r : left x0 = right y1)
               (c : code (right y1) r)
      : center_code (right y1) r = c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 568
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 569
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      change (coderight r) in c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 570
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold coderight in c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 571
Time: 0.004s">
<div class="time" style="width: 0.06630200563567%"></div>
<pre>
      revert c; refine (O_indpaths _ _ _); intros [q01 t].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 572
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold center_code, center_code1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 573
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (** Here's how we use the apparently-unmanageable [code_beta_glue].  First we destruct the path [t] to make things simpler. *)
     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 575
Time: 0.005s">
<div class="time" style="width: 0.082877507044588%"></div>
<pre>destruct t.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 575
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (** Then we notice that if we tried rewriting with [code_beta_glue] here, the unmanageable-looking result is actually fully general over the path [glue q01], so we can prove by path induction that it equals the nicer expression we'd like to see.  This is the purpose of the lemma [transport_singleton]. *)
     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 577
Time: 0.045s">
<div class="time" style="width: 0.74589756340129%"></div>
<pre>rewrite (transport_singleton
                 code (glue q01) _
                 (fun r =&gt; @codeglue x0 x0 r y1 q01)
                 (code_beta_glue x0 y1 q01 (glue q01))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 580
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold codeglue.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 581
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (** Now we evaluate [codeglue] step by step using our lemmas. *)
     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 583
Time: 0.109s">
<div class="time" style="width: 1.806729653572%"></div>
<pre>do 6 change_apply_equiv_compose.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 583
Time: 0.139s">
<div class="time" style="width: 2.3039946958395%"></div>
<pre>
      rewrite codeglue1_pushl, codeglue2_pushl, codeglue3_pushl,
      codeglue4_pushl, codeglue5_pushl, codeglue6_pushl, codeglue7_to_O.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 585
Time: 0.014s">
<div class="time" style="width: 0.23205701972485%"></div>
<pre>
      rewrite &lt;- (ap_transport (concat_1p (glue q01))
                               (fun r =&gt; to O (hfiber glue r)) _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 587
Time: 0.018s">
<div class="time" style="width: 0.29835902536052%"></div>
<pre>
      apply ap; unfold hfiber; rewrite transport_sigma'.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 588
Time: 0.347s">
<div class="time" style="width: 5.7516989888944%"></div>
<pre>
      apply ap; rewrite transport_paths_r.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 589
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      (** Finally, we have another terrible-looking thing involving [frobnicate].  However, there are enough identity paths that [frobnicate] evaluates to... something that's almost fully path-general!  So with just a little bit of further work, we can reduce it also to something we can prove with path-induction. *)
     </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 591
Time: 2.418s">
<div class="time" style="width: 40.079562406763%"></div>
<pre>cbn.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 591
Time: 0.018s">
<div class="time" style="width: 0.29835902536052%"></div>
<pre>
      rewrite (transport_compose (fun q =&gt; glue q @ (glue q01)^ = 1%path) pr1).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 592
Time: 0.05s">
<div class="time" style="width: 0.82877507044588%"></div>
<pre>
      unfold path_sigma'; rewrite ap_V, ap_pr1_path_sigma, transport_1.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 593
Time: 0.019s">
<div class="time" style="width: 0.31493452676943%"></div>
<pre>
      destruct (glue q01); reflexivity.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 594
Time: 0.369s">
<div class="time" style="width: 6.1163600198906%"></div>
<pre>
    Qed.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 595
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** It should be possible to prove an analogous [contraction_code_left] directly, but for now we follow HFLL and ABFJ by introducing a surjectivity assumption. *)

   </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 599
Time: 0.003s">
<div class="time" style="width: 0.049726504226753%"></div>
<pre>Definition contraction_code {y0 : Y} (q00 : Q x0 y0)
               (pr : { p : P &amp; left x0 = p }) (c : code pr.1 pr.2)
      : center_code pr.1 pr.2 = c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 601
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 602
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      revert c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 603
Time: 0.027s">
<div class="time" style="width: 0.44753853804078%"></div>
<pre>
      srefine (transport (fun pr' =&gt; forall c, center_code pr'.1 pr'.2 = c)
                         (path_contr (right y0 ; glue q00) pr) _).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 605
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      clear pr; cbn; intros c.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 606
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply contraction_code_right.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 607
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 608
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>

    Definition contr_code_inhab (inh : merely { y0 : Y &amp; Q x0 y0 })
               (p : P) (r : left x0 = p)
      : Contr (code p r).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 612
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 613
Time: 0.044s">
<div class="time" style="width: 0.72932206199238%"></div>
<pre>
      strip_truncations.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 614
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      destruct inh as [y0 q00].</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 615
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
      exact (Build_Contr _ (center_code p r) (contraction_code q00 (p;r))).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 616
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>
    Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 617
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

    (** This version is sufficient for the classical Blakers-Massey theorem, as we'll see below, since its leg-wise connectivity hypothesis implies the above surjectivity assumption.  ABFJ have a different method for eliminating the surjectivity assumption using a lemma about pushouts of monos also being pullbacks, though it seems to only work for coderight. *)

 </pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 621
Time: 0.393s">
<div class="time" style="width: 6.5141720537046%"></div>
<pre>End GBM.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 621
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
End GenBlakersMassey.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 622
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The classical Blakers-Massey Theorem *)

</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 625
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>Import TrM.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 625
Time: 0.32s">
<div class="time" style="width: 5.3041604508536%"></div>
<pre>
Module Import BlakersMassey := GenBlakersMassey Truncation_RSUs.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 626
Time: 0.001s">
<div class="time" style="width: 0.016575501408918%"></div>
<pre>

Global Instance blakers_massey `{Univalence} (m n : trunc_index)
           {X Y : Type} (Q : X -&gt; Y -&gt; Type)
           `{forall y, IsConnected m.+1 { x : X &amp; Q x y } }
           `{forall x, IsConnected n.+1 { y : Y &amp; Q x y } }
           (x : X) (y : Y)
  : IsConnMap (m +2+ n) (@spglue X Y Q x y).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 633
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 634
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros r.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 635
Time: 0.104s">
<div class="time" style="width: 1.7238521465274%"></div>
<pre>
  srefine (contr_code_inhab Q (m +2+ n) _ x
                            (merely_isconnected n _) (spushr Q y) r).</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 637
Time: 0.185s">
<div class="time" style="width: 3.0664677606498%"></div>
<pre>
  intros x1 x3 y2 y4 q12 q32 q34; apply isconnected_join; exact _.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 638
Time: 0.002s">
<div class="time" style="width: 0.033151002817835%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: BlakersMassey.v
Line: 640
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

