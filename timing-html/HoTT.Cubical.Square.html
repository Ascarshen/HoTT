<html>
<head>
<title>Square.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Square.v</h1>

<div class="code" title="File: Square.v
Line: 1
Time: 0.018s">
<div class="time" style="width: 6.9767441860465%"></div>
<pre>Require Import Basics.</pre>
</div>
<div class="code" title="File: Square.v
Line: 1
Time: 0.019s">
<div class="time" style="width: 7.3643410852713%"></div>
<pre>
Require Import Types.</pre>
</div>
<div class="code" title="File: Square.v
Line: 2
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Require Import DPath.</pre>
</div>
<div class="code" title="File: Square.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Declare Scope square_scope.</pre>
</div>
<div class="code" title="File: Square.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Delimit Scope square_scope with square.</pre>
</div>
<div class="code" title="File: Square.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Unset Elimination Schemes.</pre>
</div>
<div class="code" title="File: Square.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Homogeneous squares *)

(* 
        x00 ----pi0---- x01
         |               |
         |               |
        p0i     ==&gt;     p1i
         |               |
         |               |
        x01-----pi1-----x11
 *)

(* Contents:

  * Definition of Square 
  * Degnerate Squares as paths between paths
  * Flipping squares horizontally and vertically
  * Square transpose
  * Square inverse
  * Square rotations
  * Edge rewriting
  * Concatenation
  * Kan fillers
  * natural squares from ap

*)


(* Definition of Square *)
(* Square left right up down *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Cumulative Inductive Square {A} : forall a00 {a10 a01 a11 : A},
  a00 = a10 -&gt; a01 = a11 -&gt; a00 = a01 -&gt; a10 = a11 -&gt; Type
  := sq_id : forall {x : A},
    Square x 1 1 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments sq_id {A x}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Square {A _ _ _ _}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Notation "1" := sq_id : square_scope.</pre>
</div>
<div class="code" title="File: Square.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* It seems coq has difficulty actually using these, but destruct seems
   to work fine. TODO: Work out if these are correct. *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Scheme Square_ind := Induction for Square Sort Type.</pre>
</div>
<div class="code" title="File: Square.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Square_ind {A} P f {_ _ _ _ _ _ _ _} _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Scheme Square_rec := Minimality for Square Sort Type.</pre>
</div>
<div class="code" title="File: Square.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments Square_rec {A} P f {_ _ _ _ _ _ _ _} _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Square_ind is an equivalence, similar to how paths_ind is *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 54
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Global Instance isequiv_Square_ind `{Funext} {A}
  (P : forall (a00 a10 a01 a11 : A) (p : a00 = a10) (p0 : a01 = a11)
    (p1 : a00 = a01) (p2 : a10 = a11),
    Square p p0 p1 p2 -&gt; Type) : IsEquiv (Square_ind P).</pre>
</div>
<div class="code" title="File: Square.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  serapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Square.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: intros X ?; apply X.</pre>
</div>
<div class="code" title="File: Square.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  2: intro; reflexivity.</pre>
</div>
<div class="code" title="File: Square.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 62
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>
  do 8 (apply path_forall; intro).</pre>
</div>
<div class="code" title="File: Square.v
Line: 63
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  apply path_forall.</pre>
</div>
<div class="code" title="File: Square.v
Line: 64
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  by intros [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 65
Time: 0.007s">
<div class="time" style="width: 2.7131782945736%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Squares can be given by 2-dimensional paths *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_path {A} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11}
  {p0x : a00 = a01} {p1x : a10 = a11}
  : px0 @ p1x = p0x @ px1 -&gt; Square px0 px1 p0x p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro q.</pre>
</div>
<div class="code" title="File: Square.v
Line: 73
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>
  by destruct px0, p0x, (cancelL 1 _ _ q), p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 75
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

Global Instance isequiv_sq_path {A} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
: IsEquiv (@sq_path _ _ _ _ _ px0 px1 p0x p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 80
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>
  serapply isequiv_adjointify; try by intros [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro X.</pre>
</div>
<div class="code" title="File: Square.v
Line: 82
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
  destruct px0, p0x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 83
Time: 0.258s">
<div class="time" style="width: 100%"></div>
<pre>
  destruct (eissect (equiv_cancelL 1 _ _) X).</pre>
</div>
<div class="code" title="File: Square.v
Line: 84
Time: 0.08s">
<div class="time" style="width: 31.007751937984%"></div>
<pre>
  cbn; set (p := cancelL 1 _ _ X).</pre>
</div>
<div class="code" title="File: Square.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  clearbody p; clear X.</pre>
</div>
<div class="code" title="File: Square.v
Line: 86
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
  by destruct p, p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 87
Time: 0.006s">
<div class="time" style="width: 2.3255813953488%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Squares in (n+2)-truncated types are n-truncated *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance istrunc_sq n
  {A} `{!IsTrunc n.+2 A} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11}
  {p0x : a00 = a01} {p1x : a10 = a11}
  : IsTrunc n (Square px0 px1 p0x p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 95
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
  serapply (trunc_equiv _ sq_path).</pre>
</div>
<div class="code" title="File: Square.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 97
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* We can give degenerate squares *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section SquaresFromPaths.</pre>
</div>
<div class="code" title="File: Square.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* NOTE: These are much easier to prove but stringing them along with
    equivalences is how we get them to be equivalences *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context
    {A : Type} {a00 a10 a01 : A}
    {p p' : a00 = a10} {q q' : a00 = a01}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_G1  : p = p' -&gt; Square p p' 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 110
Time: 0.006s">
<div class="time" style="width: 2.3255813953488%"></div>
<pre>
    by apply sq_path, (equiv_concat_lr (concat_p1 _)^ (concat_1p _))^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 112
Time: 0.043s">
<div class="time" style="width: 16.666666666667%"></div>
<pre>

  Global Instance isequiv_sq_G1 : IsEquiv sq_G1 := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_1G : q = q' -&gt; Square 1 1 q q'.</pre>
</div>
<div class="code" title="File: Square.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 118
Time: 0.007s">
<div class="time" style="width: 2.7131782945736%"></div>
<pre>
    by apply sq_path, (equiv_concat_lr (concat_1p _)^ (concat_p1 _))^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Global Instance isequiv_sq_1G : IsEquiv sq_G1 := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 122
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

End SquaresFromPaths.</pre>
</div>
<div class="code" title="File: Square.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Square horizontal reflexivity *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_refl_h {A} {a0 a1 : A} (p : a0 = a1)
  : Square p p 1 1 := sq_G1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Square vertical reflexivity *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_refl_v {A} {a0 a1 : A} (p : a0 = a1)
  : Square 1 1 p p := sq_1G 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Horizontal flip *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 132
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_flip_h {A : Type} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : Square px0 px1 p0x p1x -&gt; Square px1 px0 p0x^ p1x^.</pre>
</div>
<div class="code" title="File: Square.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 135
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  destruct p0x, p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 137
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  by apply sq_G1, inverse, sq_G1^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance isequiv_sq_flip_h {A : Type} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : IsEquiv (sq_flip_h (px0:=px0) (px1:=px1) (p0x:=p0x) (p1x:=p1x)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 144
Time: 0.035s">
<div class="time" style="width: 13.565891472868%"></div>
<pre>
  destruct p0x, p1x; exact _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 145
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Vertical flip *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_flip_v {A : Type} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : Square px0 px1 p0x p1x -&gt; Square px0^ px1^ p1x p0x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 151
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  destruct px0, px1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 153
Time: 0.09s">
<div class="time" style="width: 34.883720930233%"></div>
<pre>
  by apply sq_1G, inverse, sq_1G^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 154
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance isequiv_sq_flip_v {A : Type} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : IsEquiv (sq_flip_v (px0:=px0) (px1:=px1) (p0x:=p0x) (p1x:=p1x)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 160
Time: 0.104s">
<div class="time" style="width: 40.31007751938%"></div>
<pre>
  destruct px0, px1; exact _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 161
Time: 0.008s">
<div class="time" style="width: 3.1007751937984%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Transpose of a square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 164
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_tr {A : Type} {a00 a10 a01 a11 : A}
  (px0 : a00 = a10) (px1 : a01 = a11) (p0x : a00 = a01) (p1x : a10 = a11)
: Square px0 px1 p0x p1x -&gt; Square p0x p1x px0 px1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 167
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
  by intros [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* NOTE: sq_tr ought to be some sort of involution but it obviously isn't
   since it is not of the form A -&gt; A. Perhaps there is a more general
   "involution" but between equivalent types? But then that very equivalence
   is given by sq_tr so it seems a bit circular... *)

</pre>
</div>
<div class="code" title="File: Square.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance isequiv_sq_tr {A : Type} {a00 a10 a01 a11 : A}
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : IsEquiv (sq_tr px0 px1 p0x p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  serapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: Square.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply sq_tr.</pre>
</div>
<div class="code" title="File: Square.v
Line: 180
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
  1,2: by intros [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 181
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments sq_tr {_ _ _ _ _ _ _ _ _}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition sq_tr_refl_h {A} {a b : A} {p : a = b}
  : sq_tr (sq_refl_h p) = sq_refl_v p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 188
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition sq_tr_refl_v {A} {a b : A} {p : a = b}
  : sq_tr (sq_refl_v p) = sq_refl_h p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 194
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
  by destruct p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Operations on squares *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section SquareOps.</pre>
</div>
<div class="code" title="File: Square.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context
    {A : Type}
    {a00 a10 a01 a11 : A}
    {px0 : a00 = a10} {px1 : a01 = a11}
    {p0x : a00 = a01} {p1x : a10 = a11}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Inverse square *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_V : Square px0 px1 p0x p1x -&gt; Square px1^ px0^ p1x^ p0x^.</pre>
</div>
<div class="code" title="File: Square.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 209
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
    by apply sq_path, (equiv_concat_lr (inv_pp _ _ )^ (inv_pp _ _)),
      inverse2, sq_path^-1, sq_tr.</pre>
</div>
<div class="code" title="File: Square.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 212
Time: 0.181s">
<div class="time" style="width: 70.15503875969%"></div>
<pre>

  Global Instance isequiv_sq_V : IsEquiv sq_V := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Left rotation : left right top bottom  -&gt;  top bottom right left *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_rot_l : Square px0 px1 p0x p1x -&gt; Square p0x^ p1x^ px1 px0.</pre>
</div>
<div class="code" title="File: Square.v
Line: 217
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 219
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
    by apply sq_path, moveR_Vp, (equiv_concat_r (concat_pp_p _ _ _)),
      moveL_pV, sq_path^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 222
Time: 0.084s">
<div class="time" style="width: 32.558139534884%"></div>
<pre>

  Global Instance isequiv_sq_rot_l : IsEquiv sq_rot_l := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Right rotation : left right top bottom -&gt; bottom top left right *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition sq_rot_r : Square px0 px1 p0x p1x -&gt; Square p1x p0x px0^ px1^.</pre>
</div>
<div class="code" title="File: Square.v
Line: 227
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 229
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
    by apply sq_path, moveL_Vp, (equiv_concat_l (concat_p_pp _ _ _)),
      moveR_pV, sq_path^-1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 232
Time: 0.097s">
<div class="time" style="width: 37.596899224806%"></div>
<pre>

  Global Instance isequiv_sq_rot_r : IsEquiv sq_rot_r := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 234
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>

End SquareOps.</pre>
</div>
<div class="code" title="File: Square.v
Line: 236
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Lemmas for rewriting sides of squares *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section SquareRewriting.</pre>
</div>
<div class="code" title="File: Square.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context {A : Type}
    {a00 a10 a01 a11 : A}
    {px0 : a00 = a10} {px1 : a01 = a11}
    {p0x : a00 = a01} {p1x : a10 = a11}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* These are all special cases of the following "rewrite all sides"
     lemma which we prove is an equivalence giving us all special cases
     as equivalences too *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 249
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_GGGG {px0' px1' p0x' p1x'} (qx0 : px0 = px0')
    (qx1 : px1 = px1') (q0x : p0x = p0x') (q1x : p1x = p1x')
    : Square px0 px1 p0x p1x -&gt; Square px0' px1' p0x' p1x'.</pre>
</div>
<div class="code" title="File: Square.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 252
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
    by destruct qx0, qx1, q0x, q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 254
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

  Global Instance isequiv_sq_GGGG {px0' px1' p0x' p1x'} (qx0 : px0 = px0')
    (qx1 : px1 = px1') (q0x : p0x = p0x') (q1x : p1x = p1x')
    : IsEquiv (sq_GGGG qx0 qx1 q0x q1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 259
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
    destruct qx0, qx1, q0x, q1x; exact _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 261
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context {px0' px1' p0x' p1x'}
    (qx0 : px0 = px0') (qx1 : px1 = px1')
    (q0x : p0x = p0x') (q1x : p1x = p1x').</pre>
</div>
<div class="code" title="File: Square.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_Gccc := sq_GGGG qx0 1 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_cGcc := sq_GGGG 1 qx1 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 268
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_ccGc := sq_GGGG 1 1 q0x 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_cccG := sq_GGGG 1 1 1 q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_GGcc := sq_GGGG qx0 qx1 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_GcGc := sq_GGGG qx0 1 q0x 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_GccG := sq_GGGG qx0 1 1 q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 273
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_cGGc := sq_GGGG 1 qx1 q0x 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 274
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_cGcG := sq_GGGG 1 qx1 1 q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 275
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_ccGG := sq_GGGG 1 1 q0x q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 276
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_GGGc := sq_GGGG qx0 qx1 q0x 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 277
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Definition sq_cGGG := sq_GGGG 1 qx1 q0x q1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 278
Time: 0.006s">
<div class="time" style="width: 2.3255813953488%"></div>
<pre>

End SquareRewriting.</pre>
</div>
<div class="code" title="File: Square.v
Line: 280
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section DPathSquare.</pre>
</div>
<div class="code" title="File: Square.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* An alternative equivalent definition for Squares in terms of
     DPaths. This is the original one Mike had written. *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context {A} {a00 a10 a01 a11 : A}
    {px0 : a00 = a10} {px1 : a01 = a11}
    {p0x : a00 = a01} {p1x : a10 = a11}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Depdent path product definition of Square *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 292
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_dp_prod : DPath (fun xy =&gt; fst xy = snd xy)
    (path_prod' p0x p1x) px0 px1 -&gt; Square px0 px1 p0x p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 294
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intro.</pre>
</div>
<div class="code" title="File: Square.v
Line: 295
Time: 0.011s">
<div class="time" style="width: 4.2635658914729%"></div>
<pre>
    set (p := (dp_paths_FlFr _ _ _)^-1 X).</pre>
</div>
<div class="code" title="File: Square.v
Line: 296
Time: 0.009s">
<div class="time" style="width: 3.4883720930233%"></div>
<pre>
    apply (equiv_concat_l (concat_pp_p _ _ _) _)^-1,
      moveL_Mp, sq_path in p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 298
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
    exact (sq_ccGG (ap_fst_path_prod _ _) (ap_snd_path_prod _ _) p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 299
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 300
Time: 0.191s">
<div class="time" style="width: 74.031007751938%"></div>
<pre>

  Global Instance isequiv_sq_dpath_prod : IsEquiv sq_dp_prod := _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 302
Time: 0.009s">
<div class="time" style="width: 3.4883720930233%"></div>
<pre>

End DPathSquare.</pre>
</div>
<div class="code" title="File: Square.v
Line: 304
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Concatenation of squares *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section SquareConcat.</pre>
</div>
<div class="code" title="File: Square.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context {A : Type} {a00 a10 a01 a11 : A}
    {px0 : a00 = a10} {px1 : a01 = a11}
    {p0x : a00 = a01} {p1x : a10 = a11}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Horizontal concatenation of squares *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 313
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_concat_h  {a02 a12 : A}
    {p0y : a01 = a02} {p1y : a11 = a12} {px2 : a02 = a12}
    : Square px0 px1 p0x p1x -&gt; Square px1 px2 p0y p1y
      -&gt; Square px0 px2 (p0x @ p0y) (p1x @ p1y).</pre>
</div>
<div class="code" title="File: Square.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Square.v
Line: 318
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
    destruct b.</pre>
</div>
<div class="code" title="File: Square.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (sq_ccGG _ _ a).</pre>
</div>
<div class="code" title="File: Square.v
Line: 320
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
    1,2: apply inverse, concat_p1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* Vertical concatenation of squares *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 325
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_concat_v {a20 a21 : A}
    {py0 : a10 = a20} {py1 : a11 = a21} {p2x : a20 = a21}
    : Square px0 px1 p0x p1x -&gt; Square py0 py1 p1x p2x
      -&gt; Square (px0 @ py0) (px1 @ py1) p0x p2x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 329
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b.</pre>
</div>
<div class="code" title="File: Square.v
Line: 330
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
    destruct b.</pre>
</div>
<div class="code" title="File: Square.v
Line: 331
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (sq_GGcc _ _ a).</pre>
</div>
<div class="code" title="File: Square.v
Line: 332
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1,2: apply inverse, concat_p1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 333
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 334
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

End SquareConcat.</pre>
</div>
<div class="code" title="File: Square.v
Line: 336
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Notations for horizontal and vertical concatenation *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Infix "@h" := sq_concat_h (at level 10) : square_scope.</pre>
</div>
<div class="code" title="File: Square.v
Line: 338
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Infix "@v" := sq_concat_v (at level 10) : square_scope.</pre>
</div>
<div class="code" title="File: Square.v
Line: 339
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Horizontal groupoid laws for concatenation *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 341
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section GroupoidLawsH.</pre>
</div>
<div class="code" title="File: Square.v
Line: 341
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* There are many more laws to write, but it seems we don't really need them *)

 </pre>
</div>
<div class="code" title="File: Square.v
Line: 345
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Context
    {A : Type}
    {a00 a10 a01 a11 a02 a12 a20 a21 a03 a13 : A} {px0 : a00 = a10}
    {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
    {px2 : a02 = a12} {p0y : a01 = a02} {p1y : a11 = a12}
    {px3 : a03 = a13} {p0z : a02 = a03} {p1z : a12 = a13}
    (s : Square px0 px1 p0x p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 351
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Open Scope square_scope.</pre>
</div>
<div class="code" title="File: Square.v
Line: 353
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Notation hr := (sq_refl_h _).</pre>
</div>
<div class="code" title="File: Square.v
Line: 354
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>

  Definition sq_concat_h_s1 : s @h hr = sq_ccGG (concat_p1 _)^ (concat_p1 _)^ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 356
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 357
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
    by destruct s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 358
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 359
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>

  Definition sq_concat_h_1s : hr @h s = sq_ccGG (concat_1p _)^ (concat_1p _)^ s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 361
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 362
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
    by destruct s.</pre>
</div>
<div class="code" title="File: Square.v
Line: 363
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 364
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context (t : Square px1 px2 p0y p1y) (u : Square px2 px3 p0z p1z).</pre>
</div>
<div class="code" title="File: Square.v
Line: 366
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>

  Definition sq_concat_h_ss_s : (s @h t) @h u
    = sq_ccGG (concat_p_pp _ _ _) (concat_p_pp _ _ _) (s @h (t @h u)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 369
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 370
Time: 0.117s">
<div class="time" style="width: 45.348837209302%"></div>
<pre>
    by destruct s, u, (sq_1G^-1 t), p0y.</pre>
</div>
<div class="code" title="File: Square.v
Line: 371
Time: 0.005s">
<div class="time" style="width: 1.937984496124%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 372
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>

End GroupoidLawsH.</pre>
</div>
<div class="code" title="File: Square.v
Line: 374
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Square Kan fillers ~ Every open box has a lid *)

</pre>
</div>
<div class="code" title="File: Square.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Kan.</pre>
</div>
<div class="code" title="File: Square.v
Line: 377
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (* These can be used to prove groupoid laws about paths *)
 </pre>
</div>
<div class="code" title="File: Square.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context {A : Type} {a00 a10 a01 a11 : A}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 380
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_fill_l (px1 : a01 = a11) (p0x : a00 = a01) (p1x : a10 = a11)
    : {px0 : a00 = a10 &amp; Square px0 px1 p0x p1x}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 383
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 384
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (p0x @ px1 @ p1x^).</pre>
</div>
<div class="code" title="File: Square.v
Line: 385
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
    by destruct px1, p0x, p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 386
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 387
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_fill_r (px0 : a00 = a10) (p0x : a00 = a01) (p1x : a10 = a11)
    : {px1 : a01 = a11 &amp; Square px0 px1 p0x p1x}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 390
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 391
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (p0x^ @ px0 @ p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 392
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
    by destruct px0, p0x, p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 393
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 394
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_fill_t (px0 : a00 = a10) (px1 : a01 = a11) (p1x : a10 = a11)
    : {p0x : a00 = a01 &amp; Square px0 px1 p0x p1x}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 397
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 398
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (px0 @ p1x @ px1^).</pre>
</div>
<div class="code" title="File: Square.v
Line: 399
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
    by destruct px0, px1, p1x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 400
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 401
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Definition sq_fill_b (px0 : a00 = a10) (px1 : a01 = a11) (p0x : a00 = a01)
    : {p1x : a10 = a11 &amp; Square px0 px1 p0x p1x}.</pre>
</div>
<div class="code" title="File: Square.v
Line: 404
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 405
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exists (px0^ @ p0x @ px1).</pre>
</div>
<div class="code" title="File: Square.v
Line: 406
Time: 0.008s">
<div class="time" style="width: 3.1007751937984%"></div>
<pre>
    by destruct px0, px1, p0x.</pre>
</div>
<div class="code" title="File: Square.v
Line: 407
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 408
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

End Kan.</pre>
</div>
<div class="code" title="File: Square.v
Line: 410
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Apply a function to the sides of square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 412
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_ap {A B : Type} {a00 a10 a01 a11 : A} (f : A -&gt; B)
  {px0 : a00 = a10} {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11}
  : Square px0 px1 p0x p1x -&gt; Square (ap f px0) (ap f px1) (ap f p0x) (ap f p1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 414
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 415
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>
  by intros [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 416
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 417
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Curried version of the following equivalence *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 419
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>Definition sq_prod {A B : Type} {a00 a10 a01 a11 : A} {px0 : a00 = a10}
  {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11} {b00 b10 b01 b11 : B}
  {qx0 : b00 = b10} {qx1 : b01 = b11} {q0x : b00 = b01} {q1x : b10 = b11}
  : Square px0 px1 p0x p1x -&gt; Square qx0 qx1 q0x q1x
    -&gt; Square (path_prod' px0 qx0) (path_prod' px1 qx1)
        (path_prod' p0x q0x) (path_prod' p1x q1x).</pre>
</div>
<div class="code" title="File: Square.v
Line: 424
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 425
Time: 0.006s">
<div class="time" style="width: 2.3255813953488%"></div>
<pre>
  by intros [] [].</pre>
</div>
<div class="code" title="File: Square.v
Line: 426
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 427
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(*
(* Squares respect products *)
(* TODO: Finish this: we ought to have some sort of eta for sq_prod
   that might help *)
Definition equiv_sq_prod {A B : Type} {a00 a10 a01 a11 : A} {px0 : a00 = a10}
  {px1 : a01 = a11} {p0x : a00 = a01} {p1x : a10 = a11} {b00 b10 b01 b11 : B}
  {qx0 : b00 = b10} {qx1 : b01 = b11} {q0x : b00 = b01} {q1x : b10 = b11}
  : (Square px0 px1 p0x p1x) * (Square qx0 qx1 q0x q1x)
    &lt;~&gt; Square (path_prod' px0 qx0) (path_prod' px1 qx1)
        (path_prod' p0x q0x) (path_prod' p1x q1x).
Proof.
  serapply equiv_adjointify.
  1: apply uncurry, sq_prod.
  { intro c.
    destruct p1x, q1x, p0x, q0x.
    apply sq_G1^-1 in c.
    set (f := ap (ap fst) c); clearbody f.
    set (s := ap (ap snd) c); clearbody s.
    destruct ((ap_fst_path_prod _ _)^ @ ap (ap fst) c @ ap_fst_path_prod _ _).
    destruct ((ap_snd_path_prod _ _)^ @ ap (ap snd) c @ ap_snd_path_prod _ _).
    split.
    1,2: apply sq_refl_h. }
  { intro c.
    set (s1 := sq_GGGG (ap_fst_path_prod _ _) (ap_fst_path_prod _ _)
      (ap_fst_path_prod _ _) (ap_fst_path_prod _ _) (sq_ap fst c)).
    set (s2 := sq_GGGG (ap_snd_path_prod _ _) (ap_snd_path_prod _ _)
      (ap_snd_path_prod _ _) (ap_snd_path_prod _ _) (sq_ap snd c)).
    admit. }
  by intros [[] []].
Admitted. *)

(* The natural square from an ap *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 460
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition ap_nat {A B} {f f' : A -&gt; B} (h : f == f') {x y : A} (p : x = y)
  : Square (ap f p) (ap f' p) (h x) (h y).</pre>
</div>
<div class="code" title="File: Square.v
Line: 461
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 462
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  by destruct p; apply sq_1G.</pre>
</div>
<div class="code" title="File: Square.v
Line: 463
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 464
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* The transpose of the natural square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 466
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition ap_nat' {A B} {f f' : A -&gt; B} (h : f == f') {x y : A} (p : x = y)
  : Square (h x) (h y) (ap f p) (ap f' p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 467
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 468
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  by destruct p; apply sq_G1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 469
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 470
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* ap_compose fits naturally into a square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 472
Time: 0.003s">
<div class="time" style="width: 1.1627906976744%"></div>
<pre>Definition ap_compose_sq {A B C} (f : A -&gt; B) (g : B -&gt; C) {x y : A} (p : x = y)
  : Square (ap (g o f) p) (ap g (ap f p)) 1 1 := sq_G1 (ap_compose f g p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 473
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

Definition ap_idmap_sq {A} {x y : A} (p : x = y) : Square (ap idmap p) p 1 1
  := sq_G1 (ap_idmap p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 476
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* A DPath of a certain form can be turned into a square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 478
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>Definition sq_dp {A B : Type} {f g : A -&gt; B} {a1 a2 : A} {p : a1 = a2}
  {q1 : f a1 = g a1} {q2 : f a2 = g a2}
  : DPath (fun x =&gt; f x = g x) p q1 q2 -&gt; Square q1 q2 (ap f p) (ap g p).</pre>
</div>
<div class="code" title="File: Square.v
Line: 480
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 481
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  destruct p.</pre>
</div>
<div class="code" title="File: Square.v
Line: 482
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact sq_G1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 483
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 484
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>

Global Instance isequiv_sq_dp {A B : Type} {f g : A -&gt; B} {a1 a2 : A}
  {p : a1 = a2} {q1 : f a1 = g a1} {q2 : f a2 = g a2}
  : IsEquiv (sq_dp (p:=p) (q1:=q1) (q2:=q2)).</pre>
</div>
<div class="code" title="File: Square.v
Line: 488
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 489
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
  destruct p; exact _.</pre>
</div>
<div class="code" title="File: Square.v
Line: 490
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 491
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* ap2 fits into a square *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 493
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>Definition sq_ap2 {A B C} (f : A -&gt; B -&gt; C)
  {a a' : A} (p : a = a') {b b' : B} (q : b = b')
  : Square (ap (fun x =&gt; f x b) p) (ap (fun x =&gt; f x b') p)
    (ap (f a) q) (ap (f a') q)
  := sq_dp (dp_apD (fun y =&gt; ap (fun x =&gt; f x y) _) _).</pre>
</div>
<div class="code" title="File: Square.v
Line: 497
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* The function in ap2 can be uncurried *)</pre>
</div>
<div class="code" title="File: Square.v
Line: 499
Time: 0.002s">
<div class="time" style="width: 0.77519379844961%"></div>
<pre>Definition ap_uncurry {A B C} (f : A -&gt; B -&gt; C) {a a' : A} (p : a = a')
  {b b' : B} (q : b = b')
  : Square (ap (uncurry f) (path_prod' p q)) (ap2 f p q) 1 1.</pre>
</div>
<div class="code" title="File: Square.v
Line: 501
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Square.v
Line: 502
Time: 0.004s">
<div class="time" style="width: 1.5503875968992%"></div>
<pre>
  by destruct p, q.</pre>
</div>
<div class="code" title="File: Square.v
Line: 503
Time: 0.001s">
<div class="time" style="width: 0.38759689922481%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Square.v
Line: 505
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



</pre>
</div>
</body>
</html>

